webpackJsonp([0],[,function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){r(this,e)}return i(e,null,[{key:"distance",value:function(e,t){var n=e.x-t.x,r=e.y-t.y;return Math.sqrt(n*n+r*r)}},{key:"numberArray",value:function(e,t){for(var n=[],r=e;r<t;r+=1)n.push(r);return n}},{key:"animDuration",value:function(e,t){return e*t*10}},{key:"getRandomInt",value:function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e))+e}},{key:"getTargetDirection",value:function(e,t){return e>t?1:-1}}]),e}();t.default=o},,,,,function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(e){function t(e,n,o,a){r(this,t);var u=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,o,a));return e.add.existing(u),e.physics.arcade.enable(u),u.id="???",u.name=a,u.body.allowGravity=!1,u.body.enable=!1,u.alpha=0,u.stats={damageOutput:1},u.anchor.x=.5,u}return o(t,e),a(t,[{key:"damageOutput",value:function(){return this.stats.damageOutput}},{key:"use",value:function(e,t){var n=this;this.body.enabled||(this.body.enable=!0,this.game.time.events.add(e,function(){n.body.enable=!1,"function"==typeof t&&t.call(n)},this))}},{key:"anchorTo",value:function(e,t){this.x=e,this.y=t}}]),t}(Phaser.Sprite);t.default=u},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){}function o(){g.load.spritesheet("player","resources/Game/player.png",128,128,20),g.load.spritesheet("enemy","resources/Game/enemy.png",128,128,20),g.load.image("ground","resources/Game/platform tile2.png",32,32)}function a(){var e=this;this.game.physics.startSystem(c.default.Physics.ARCADE),g.physics.arcade.gravity.y=2e3,this.game.stage.backgroundColor="#2d2d2d",this.game.input.keyboard.addKeyCapture([c.default.Keyboard.LEFT,c.default.Keyboard.RIGHT,c.default.Keyboard.UP,c.default.Keyboard.DOWN]),this.attackKey=this.game.input.keyboard.addKey(c.default.Keyboard.CONTROL),this.ground=new h.default(g).makeTest(),this.hero=new m.default(g,700,100,f.default.player.sprite,{config:f.default.player.config,stats:f.default.player.stats,equipment:f.default.player.equipment}),this.hero.registerAnimations(f.default.player.animations),this.hero.setWeapon(f.default.weapons.find(function(e){return e.id===f.default.player.equipment.value.primaryWeapon})),this.hero.setBody(f.default.player.body),this.attackKey.onDown.add(function(){this.hero.attack()},this),this.enemies=g.add.group(),this.enemyWeapons=g.add.group(),v.enemies.map(function(e){return d.default.make(e.id,e.pos,g)}).forEach(function(t){t.setTarget(e.hero),e.enemies.add(t),t.activeWeapon&&e.enemyWeapons.add(t.activeWeapon)})}function u(){this.game.physics.arcade.collide(this.hero,this.ground),this.game.physics.arcade.collide(this.enemies,this.ground),this.game.physics.arcade.overlap(this.hero.activeWeapon,this.enemies,function(e,t){t.takeDamage(e.damageOutput(),{x:e.x,y:e.y})},null,this),this.game.physics.arcade.overlap(this.hero,this.enemyWeapons,function(e,t){e.takeDamage(t.damageOutput(),{x:t.x,y:t.y})},null,this)}n(3),n(4);var s=n(5),c=r(s),l=n(24),f=r(l),p=n(12),h=r(p),y=n(13),d=r(y),b=n(25),m=r(b),v={enemies:[{id:"bug",pos:{x:150,y:100}}]},g=new c.default.Game(800,600,c.default.AUTO,"phaser-example",{preload:o,create:a,update:u,render:i})},,,,,function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t){r(this,e),this.game=t}return i(e,[{key:"makeTest",value:function(e){for(var t=this.game.add.group(),n=0;n<this.game.width;n+=32){var r=this.game.add.sprite(n,this.game.height-32,"ground");this.game.physics.enable(r,Phaser.Physics.ARCADE),r.body.immovable=!0,r.body.allowGravity=!1,t.add(r)}for(var n=512;n<this.game.width-68;n+=32){var r=this.game.add.sprite(n,this.game.height-312,"ground");this.game.physics.enable(r,Phaser.Physics.ARCADE),r.body.immovable=!0,r.body.allowGravity=!1,t.add(r)}return t}}]),e}();t.default=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(14),u=r(a),s=n(24),c=r(s),l=function(){function e(){i(this,e)}return o(e,null,[{key:"make",value:function(e,t,n){var r=c.default.creatures.find(function(t){return t.id===e}),i=new u.default(n,t.x,t.y,r.sprite,{config:r.config,stats:r.stats,equipment:r.equipment});return i.registerAnimations(r.animations).setWeapon(c.default.weapons.find(function(e){return e.id===r.equipment.value.primaryWeapon})).setBody(r.body).initializeAI(),i}}]),e}();t.default=l},function(e,t,n){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(26),c=r(s),l=n(1),f=r(l),p=n(6),h=r(p),y=n(15),d=(r(y),n(16)),b=r(d),m=n(17),v=r(m),g=n(18),w=r(g),_=n(19),O=r(_),k=n(20),j=r(k),P=n(21),T=(r(P),n(22)),x=(r(T),n(23)),E=r(x),R=n(31),S=r(R),A=n(29),W=r(A),C=function(t){function n(e,t,r,a,u){i(this,n);var s=o(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t,r,a));return e.add.existing(s),e.physics.arcade.enable(s),s.config={},s.stats={},s.equipment={},s.activeWeapon={},u&&Object.defineProperties(s,u),s.currentTarget=null,s.busy=!1,s.disabled=!1,s.jumping=!1,s.anchor.x=.5,s.animator=new S.default(s.animations),s}return a(n,t),u(n,[{key:"update",value:function(){if(this.activeWeapon.anchorTo(this.x,this.y+this.activeWeapon.height),(!this.disabled||this.disabled&&0===this.body.velocity.y)&&(this.body.velocity.x=0),this.busy||this.tree.tick(this,this.blackboard),this.currentTarget){var e=f.default.distance(this,this.currentTarget);this.blackboard.set("inRangeOfTarget",e<this.config.alertRange),this.blackboard.set("inRangeOfAttack",e<this.config.attackRange)}this.animate()}},{key:"setWeapon",value:function(e){return this.activeWeapon=new h.default(this.game,0,0,"weapon-gfx"),this.activeWeapon.y+=this.activeWeapon.height,this.activeWeapon.body.setSize(48,64,32,32),this}},{key:"setBody",value:function(e){return this.body.setSize(e.x,e.y,e.w,e.h),this}},{key:"initializeAI",value:function(){return this.blackboard=new e.Blackboard,this.tree=new e.BehaviorTree,this.tree.root=new e.Priority({children:[new E.default("inRangeOfAttack",{child:new v.default}),new E.default("inRangeOfTarget",{child:new b.default}),new j.default({children:[new w.default(!0),new O.default]})]}),this}},{key:"move",value:function(e){f.default.distance(this,this.currentTarget)<this.width/3||this.disabled||this.targetWithinBounds()||(this.body.velocity.x+=e>0?this.config.movementSpeed:-this.config.movementSpeed,this.scale.setTo(e,1),this.activeWeapon.scale.setTo(e,1))}},{key:"moveTo",value:function(e){if(!this.disabled){var t=f.default.getTargetDirection(e.x,this.x);this.body.velocity.x+=t>0?this.config.movementSpeed:-this.config.movementSpeed,this.scale.setTo(t,1),this.activeWeapon.scale.setTo(t,1)}}},{key:"stop",value:function(){this.body.velocity.x=0}},{key:"faceTarget",value:function(e){var t=f.default.getTargetDirection(e.x,this.x);this.scale.setTo(t,1),this.activeWeapon.scale.setTo(t,1)}},{key:"targetWithinBounds",value:function(){return this.currentTarget&&this.currentTarget.x>this.x-this.width/3&&this.currentTarget.x<this.x+this.width/3}},{key:"setTarget",value:function(e){this.currentTarget=e,this.blackboard.set("currentTarget",this.currentTarget)}},{key:"chaseTarget",value:function(){this.move(f.default.getTargetDirection(this.blackboard.get("currentTarget").x,this.x))}},{key:"attackTarget",value:function(){var e=this;if(!this.disabled&&!this.busy){this.faceTarget(this.currentTarget),this.busy=!0,this.priorityAnimation=!0;var t=this.animator.getAnimation("attack"),n=f.default.getRandomInt(200,500),r=f.default.getRandomInt(200,500);this.game.time.events.add(n,function(){e.animator.play("attack"),e.activeWeapon.use(f.default.animDuration(t.speed,t.frameTotal),function(){e.game.time.events.add(r,function(){e.busy=!1},e)})},this)}}},{key:"takeDamage",value:function(e,t){this.disabled||(console.log(this.name+" is taking damage: "+e),console.log(t,"was origin of damage."),this.body.velocity.x=-300*f.default.getTargetDirection(this.blackboard.get("currentTarget").x,this.x),this.body.velocity.y=-300,this.damageFlash())}},{key:"registerAnimations",value:function(e){return this.animator.registerMany(e),this}},{key:"animate",value:function(){this.disabled||(0!=this.body.velocity.x?this.animator.play("run"):this.animator.play("idle"))}}]),n}((0,c.default)(Phaser.Sprite).with(W.default));t.default=C}).call(t,n(0))},function(e,t,n){"use strict";(function(e){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(t){function a(){n(this,a);var e=r(this,(a.__proto__||Object.getPrototypeOf(a)).call(this));return e.name="Idle",e}return i(a,t),o(a,[{key:"open",value:function(e){}},{key:"tick",value:function(t){return e.RUNNING}}]),a}(e.Action);t.default=a}).call(t,n(0))},function(e,t,n){"use strict";(function(e){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();n(0);var u=function(t){function n(){r(this,n);var e=i(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.name="Follow",e}return o(n,t),a(n,[{key:"open",value:function(e){}},{key:"tick",value:function(t){return t.target.chaseTarget(),e.RUNNING}}]),n}(e.Action);t.default=u}).call(t,n(0))},function(e,t,n){"use strict";(function(e){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();n(0);var u=function(t){function n(){r(this,n);var e=i(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.name="Attack",e}return o(n,t),a(n,[{key:"open",value:function(e){e.target.attackTarget()}},{key:"tick",value:function(t){return t.target.busy?e.RUNNING:e.SUCCESS}}]),n}(e.Action);t.default=u}).call(t,n(0))},function(e,t,n){"use strict";(function(e){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),s=function(e){return e&&e.__esModule?e:{default:e}}(u),c=function(t){function n(e){r(this,n);var t=i(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return t.name="Roam",t.currentLocation={x:0,y:0},t.destination={x:0,y:0},t.ignoreY=e,t}return o(n,t),a(n,[{key:"open",value:function(e){this.currentLocation.x=e.target.x,this.currentLocation.y=e.target.y,this.destination.x=s.default.getRandomInt(30,770),this.destination.y=e.target.y,console.log("Roam started...")}},{key:"tick",value:function(t){return this.ignoreY&&(this.destination.y=t.target.y),t.target.moveTo(this.destination),s.default.distance({x:t.target.x,y:t.target.y},this.destination)<30?(t.target.stop(),console.log("Destination reached."),e.SUCCESS):(console.log("Roaming..."),e.RUNNING)}}]),n}(e.Action);t.default=c}).call(t,n(0))},function(e,t,n){"use strict";(function(e){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),s=function(e){return e&&e.__esModule?e:{default:e}}(u),c=function(t){function n(){r(this,n);var e=i(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.name="RandomWait",e.startTime=0,e.endTime=0,e}return o(n,t),a(n,[{key:"open",value:function(e){this.startTime=(new Date).getTime(),this.endTime=1e3*s.default.getRandomInt(1,3),console.log("Wait started.")}},{key:"tick",value:function(t){return(new Date).getTime()-this.startTime>this.endTime?(console.log("Wait complete."),e.SUCCESS):e.RUNNING}}]),n}(e.Action);t.default=c}).call(t,n(0))},function(e,t,n){"use strict";(function(e){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(t){function a(e){n(this,a);var t=r(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.name="SequenceSynced",t.i=0,t}return i(a,t),o(a,[{key:"tick",value:function(t){var n=this.children[this.i]._execute(t);if(n===e.SUCCESS){if(this.i>=this.children.length-1)return this.i=0,n;this.i+=1}return e.RUNNING}}]),a}(e.Composite);t.default=a}).call(t,n(0))},function(e,t,n){"use strict";(function(e){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();n(0);var u=function(t){function n(){r(this,n);var e=i(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.name="InRange",e}return o(n,t),a(n,[{key:"tick",value:function(t){return t.blackboard.get("inRangeOfTarget")?e.SUCCESS:e.FAILURE}}]),n}(e.Condition);t.default=u}).call(t,n(0))},function(e,t,n){"use strict";(function(e){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();n(0);var u=function(t){function n(){r(this,n);var e=i(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.name="InAttackRange",e}return o(n,t),a(n,[{key:"tick",value:function(t){return t.blackboard.get("inRangeOfAttack")?e.SUCCESS:e.FAILURE}}]),n}(e.Condition);t.default=u}).call(t,n(0))},function(e,t,n){"use strict";(function(e){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();n(0);var u=function(t){function n(e,t){r(this,n);var o=i(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t));return o.name="BoolCheck",o.propertyName=e,o}return o(n,t),a(n,[{key:"tick",value:function(t){return this.child?t.blackboard.get(this.propertyName)?(this.child._execute(t),e.SUCCESS):e.FAILURE:e.ERROR}}]),n}(e.Decorator);t.default=u}).call(t,n(0))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=function(e){return e&&e.__esModule?e:{default:e}}(r),o={player:{id:"player",sprite:"player",body:{x:48,y:48,w:38,h:80},stats:{value:{hp:4,maxHP:4}},equipment:{value:{primaryWeapon:"testWeapon"}},config:{value:{movementSpeed:400,jumpSpeed:-700}},animations:[{name:"idle",frames:i.default.numberArray(3,6),fps:3,loops:!0},{name:"run",frames:i.default.numberArray(12,18),fps:12,loops:!0},{name:"attack",frames:i.default.numberArray(1,3),fps:10,loops:!1},{name:"jump",frames:[7],fps:8,loops:!1},{name:"fall",frames:[18],fps:8,loops:!1}]},weapons:[{id:"testWeapon",sprite:"test-wep",weaponProperties:{value:{dmg:1,animTime:1e3}}}],creatures:[{id:"bug",sprite:"enemy",body:{x:48,y:48,w:38,h:80},stats:{value:{hp:4,maxHP:4}},equipment:{value:{primaryWeapon:"testWeapon"}},config:{value:{movementSpeed:200,alertRange:400,attackRange:60}},animations:[{name:"idle",frames:i.default.numberArray(3,6),fps:3,loops:!0},{name:"run",frames:i.default.numberArray(12,18),fps:12,loops:!0},{name:"attack",frames:i.default.numberArray(1,3),fps:10,loops:!1}]}]};t.default=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(26),c=r(s),l=n(1),f=r(l),p=n(27),h=r(p),y=n(6),d=r(y),b=n(31),m=r(b),v=n(29),g=r(v),w=function(e){function t(e,n,r,a,u,s){i(this,t);var c=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,r,a));return e.add.existing(c),e.physics.arcade.enable(c),c.config={},c.stats={},c.equipment={},c.activeWeapon={},u&&Object.defineProperties(c,u),c.body.collideWorldBounds=!0,c.busy=!1,c.disabled=!1,c.jumping=!1,c.anchor.x=.5,c.animator=new m.default(c.animations),c}return a(t,e),u(t,[{key:"update",value:function(){this.disabled||(this.activeWeapon.anchorTo(this.x,this.y+this.activeWeapon.height),this.leftInputIsActive()?(this.body.velocity.x=-this.config.movementSpeed,this.scale.setTo(-1,1),this.activeWeapon.scale.setTo(-1,1)):this.rightInputIsActive()?(this.body.velocity.x=this.config.movementSpeed,this.scale.setTo(1,1),this.activeWeapon.scale.setTo(1,1)):this.body.velocity.x=0,this.body.touching.down&&(this.jumps=2,this.jumping=!1),this.jumps>0&&this.upInputIsActive(150)&&(this.body.velocity.y=this.config.jumpSpeed,this.jumping=!0),this.jumping&&this.upInputReleased()&&(this.jumps--,this.jumping=!1),this.animate())}},{key:"setWeapon",value:function(e){return this.activeWeapon=new d.default(this.game,0,0,"weapon-gfx"),this.activeWeapon.y+=this.activeWeapon.height,this.activeWeapon.body.setSize(48,64,32,32),this}},{key:"setBody",value:function(e){return this.body.setSize(e.x,e.y,e.w,e.h),this}},{key:"attack",value:function(){var e=this.animator.play("attack");e&&this.activeWeapon.use(f.default.animDuration(e.speed,e.frameTotal))}},{key:"takeDamage",value:function(e,t){this.disabled||(console.log(this.name+" is taking damage: "+e),console.log(t,"was origin of damage."),this.body.velocity.x=-300*f.default.getTargetDirection(t.x,this.x),this.body.velocity.y=-300,this.damageFlash())}},{key:"registerAnimations",value:function(e){return this.animator.registerMany(e),this}},{key:"animate",value:function(){if(0!==this.body.velocity.y)return void(this.body.velocity.y<0?this.animator.play("jump"):this.animator.play("fall"));0!==this.body.velocity.x?this.animator.play("run"):this.animator.play("idle")}}]),t}((0,c.default)(Phaser.Sprite).with(h.default,g.default));t.default=w},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t){r(this,e),this.superclass=t}return i(e,[{key:"with",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(function(e,t){return t(e)},this.superclass)}}]),e}();t.default=function(e){return new o(e)}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(e){return function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),a(t,[{key:"leftInputIsActive",value:function(){var e=!1;return e=this.game.input.keyboard.isDown(Phaser.Keyboard.LEFT),e|=this.game.input.activePointer.isDown&&this.game.input.activePointer.x<this.game.width/4}},{key:"rightInputIsActive",value:function(){var e=!1;return e=this.game.input.keyboard.isDown(Phaser.Keyboard.RIGHT),e|=this.game.input.activePointer.isDown&&this.game.input.activePointer.x>this.game.width/2+this.game.width/4}},{key:"upInputIsActive",value:function(e){var t=!1;return t=this.game.input.keyboard.downDuration(Phaser.Keyboard.UP,e),t|=this.game.input.activePointer.justPressed(e+1e3/60)&&this.game.input.activePointer.x>this.game.width/4&&this.game.input.activePointer.x<this.game.width/2+this.game.width/4}},{key:"upInputReleased",value:function(){var e=!1;return e=this.game.input.keyboard.upDuration(Phaser.Keyboard.UP),e|=this.game.input.activePointer.justReleased()}}]),t}(e)};t.default=u},,function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(e){return function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),a(t,[{key:"damageFlash",value:function(){this.disabled=!0,this.alpha=0,this.tint=16777215,this.flashTween=this.game.add.tween(this).to({tint:16772863,alpha:1},10,"Linear",!0,0,-1),this.flashTween.yoyo(!0,10),this.game.time.events.add(.6*Phaser.Timer.SECOND,function(){this.disabled=!1,this.alpha=1,this.tint=16777215,this.flashTween.stop()},this)}}]),t}(e)};t.default=u},,function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t){r(this,e),this.animator=t,this.currentAnim=null,this.playWhenDone=""}return i(e,[{key:"registerMany",value:function(e){for(var t=0;t<e.length;t++)this.register(e[t])}},{key:"register",value:function(e){if(!this.getAnimation(e.name)){var t=this.animator.add(e.name,e.frames,e.fps,e.loops);e.loops||t.onComplete.add(this.animDone,this)}}},{key:"getAnimation",value:function(e){return this.animator.getAnimation(e)}},{key:"play",value:function(e){if(this.currentAnim&&!this.currentAnim.loop)return void(this.playWhenDone=e);var t=this.animator.play(e);return this.currentAnim=t,t}},{key:"animDone",value:function(){this.playWhenDone.length>0&&(this.currentAnim=this.animator.play(this.playWhenDone))}}]),e}();t.default=o}],[7]);