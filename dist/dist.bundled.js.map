{"version":3,"sources":["webpack:///./src/helpers/Helpers.js","webpack:///./src/stubs/GameData.js","webpack:///./src/helpers/Mix.js","webpack:///./src/entities/BaseEntity.js","webpack:///./src/stubs/TreeData.js","webpack:///./src/enums/TreeNodeTypes.js","webpack:///./src/components/AttachedWeapon.js","webpack:///./src/components/HitEffects.js","webpack:///./src/game.js","webpack:///./src/states/GameState.js","webpack:///./src/stubs/MapData.js","webpack:///./src/world/WorldBuilder.js","webpack:///./src/factories/CreatureFactory.js","webpack:///./src/entities/Enemy.js","webpack:///./src/animation/Animator.js","webpack:///./src/ai/Behaviours.js","webpack:///./src/factories/BehaviourFactory.js","webpack:///./src/ai/nodes/actions/Idle.js","webpack:///./src/ai/nodes/actions/Follow.js","webpack:///./src/ai/nodes/actions/Attack.js","webpack:///./src/ai/nodes/actions/Roam.js","webpack:///./src/ai/nodes/actions/RandomWait.js","webpack:///./src/ai/nodes/composites/SequenceSynced.js","webpack:///./src/ai/nodes/conditions/InRange.js","webpack:///./src/ai/nodes/conditions/InAttackRange.js","webpack:///./src/ai/nodes/decorators/BoolCheck.js","webpack:///./src/entities/Weapon.js","webpack:///./src/entities/Hero.js","webpack:///./src/components/InputManager.js"],"names":["Helpers","object","target","a","x","b","y","Math","sqrt","begin","end","arr","i","push","fps","frameNum","min","max","ceil","floor","random","tx","ownerx","owner","range","gameData","player","id","sprite","body","w","h","stats","value","hp","maxHP","equipment","primaryWeapon","config","movementSpeed","jumpSpeed","animations","name","frames","numberArray","loops","weapons","weaponProperties","dmg","animTime","creatures","behaviourId","alertRange","attackRange","MixinBuilder","superclass","mixins","reduce","c","mixin","BaseEntity","game","data","add","existing","physics","enable","Phaser","Physics","ARCADE","activeWeapon","Object","defineProperties","busy","disabled","anchor","animator","velocity","bodyData","setSize","dir","scale","setTo","pos","correctScale","getTargetDirection","Sprite","TreeData","root","type","COMPOSITE","children","ACTION","param","TreeNodeTypes","AttachedWeapon","weaponData","height","setBody","HitEffects","alpha","tint","flashTween","tween","to","yoyo","time","events","Timer","SECOND","stop","Game","AUTO","state","start","GameState","load","spritesheet","image","tilemap","Tilemap","TILED_JSON","plugins","Plugin","ArcadeSlopes","startSystem","arcade","gravity","TILE_BIAS","stage","backgroundColor","mapData","find","world","layers","cacheName","worldSizeLayer","collisionLayer","getCollisionLayer","hero","attachWeapon","registerMany","enemies","group","enemyWeapons","map","d","camera","follow","Camera","FOLLOW_TOPDOWN","gameTileMap","addTilesetImage","slopes","convertTilemapLayer","debug","collide","overlap","weapon","npc","takeDamage","damageOutput","MapData","WorldBuilder","length","layer","layerData","phaserLayer","createLayer","Error","collision","setCollisionByExclusion","getWorldSizeLayer","resizeWorld","CreatureFactory","creatureData","creature","Enemy","behaviours","anchorTo","onFloor","resetMovement","update","currentTarget","distance","setVariable","animate","width","targetWithinBounds","t","move","faceTarget","priorityAnimation","currentAnim","getAnimation","attackStartDelay","getRandomInt","attackEndDelay","play","use","animDuration","speed","frameTotal","n","origin","console","log","disable","damageFlash","with","Animator","phaseranimator","playWhenDone","register","anim","onComplete","animDone","str","loop","Behaviours","blackboard","b3","Blackboard","tree","BehaviorTree","build","set","tick","nodeClasses","Priority","BehaviourFactory","nd","CNS","child","DECORATOR","Idle","RUNNING","Action","Follow","chaseTarget","Attack","attackTarget","SUCCESS","Roam","ignoreY","currentLocation","destination","moveTo","RandomWait","startTime","endTime","Date","getTime","currTime","SequenceSynced","status","_execute","Composite","InRange","get","FAILURE","Condition","InAttackRange","BoolCheck","propertyName","ERROR","Decorator","Weapon","allowGravity","enabled","call","Hero","collideWorldBounds","itype","jumps","jumping","initManualInput","inputUpdate","inputType","leftInputIsActive","rightInputIsActive","upInputIsActive","upInputReleased","InputManager","input","keyboard","addKeyCapture","Keyboard","LEFT","RIGHT","UP","DOWN","attackKey","addKey","CONTROL","onDown","attack","isActive","isDown","activePointer","duration","downDuration","justPressed","released","upDuration","justReleased"],"mappings":"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","file":"dist.bundled.js","sourcesContent":["class Helpers {\r\n\r\n    static distance(object, target) {\r\n\r\n        let a = object.x - target.x;\r\n        let b = object.y - target.y;\r\n\r\n        return Math.sqrt(a * a + b * b);\r\n\r\n    }\r\n\r\n    // -> http://davidarvelo.com/blog/array-number-range-sequences-in-javascript-es6/\r\n    static numberArray(begin, end) {\r\n        let arr = [];\r\n        for (let i = begin; i < end; i += 1) {\r\n            arr.push(i);\r\n        }\r\n        return arr;\r\n    }\r\n\r\n    static animDuration(fps, frameNum) {\r\n        return (fps * frameNum) * 10;\r\n    }\r\n\r\n    static getRandomInt(min, max) {\r\n        min = Math.ceil(min);\r\n        max = Math.floor(max);\r\n        return Math.floor(Math.random() * (max - min)) + min; //The maximum is exclusive and the minimum is inclusive\r\n    }\r\n\r\n    static getTargetDirection(tx, ownerx) {\r\n\r\n        return tx > ownerx ? 1 : -1;\r\n\r\n    }\r\n\r\n    static targetWithinBounds(target, owner, range) {\r\n\r\n        // Checks if the current target is within a good enough 'x' zone to prevent left-right shift (might need 'y' in future)\r\n        return target && (target.x > owner.x - range && target.x < owner.x + range);\r\n\r\n    }\r\n\r\n}\r\n\r\nexport default Helpers;\n\n\n// WEBPACK FOOTER //\n// ./src/helpers/Helpers.js","// Technically you shouldn't need to change anything in here, but number arrays\r\n// are so painful. Again though, this would all be in JSON and auto-generated to\r\n// a point. Stubs are just what they are, stubs.\r\nimport Helpers from '../helpers/Helpers';\r\n\r\n// Please make a 'const' or JSON in the future (when it's ready)\r\nlet gameData = {\r\n    player: {\r\n        id: 'player',\r\n        sprite: 'player',\r\n        body: {\r\n            x: 48,\r\n            y: 48,\r\n            w: 38,\r\n            h: 80\r\n        },\r\n        stats: {\r\n            value: {\r\n                hp: 4,\r\n                maxHP: 4\r\n            }\r\n        },\r\n        equipment: {\r\n            value: {\r\n                primaryWeapon: 'testWeapon'\r\n            }\r\n        },\r\n        config: {\r\n            value: {\r\n                movementSpeed: 400, // pixels/second/second\r\n                jumpSpeed: -700 // pixels/second (negative y is up)\r\n            }\r\n        },\r\n        animations: [\r\n            {\r\n                name: 'idle',\r\n                frames: Helpers.numberArray(3, 6),\r\n                fps: 3,\r\n                loops: true\r\n            },\r\n            {\r\n                name: 'run',\r\n                frames: Helpers.numberArray(12, 18),\r\n                fps: 12,\r\n                loops: true\r\n            },\r\n            {\r\n                name: 'attack',\r\n                frames: Helpers.numberArray(1, 3),\r\n                fps: 10,\r\n                loops: false\r\n            },\r\n            {\r\n                name: 'jump',\r\n                frames: [7],\r\n                fps: 8,\r\n                loops: false\r\n            },\r\n            {\r\n                name: 'fall',\r\n                frames: [18],\r\n                fps: 8,\r\n                loops: false\r\n            }\r\n        ]\r\n    },\r\n    weapons: [\r\n        {\r\n            id: 'testWeapon',\r\n            sprite: 'test-wep',\r\n            weaponProperties: {\r\n                value: {\r\n                    dmg: 1,\r\n                    animTime: 1000\r\n                }\r\n            },\r\n            body: {\r\n                x: 48,\r\n                y: 64,\r\n                w: 32,\r\n                h: 32\r\n            }\r\n        }\r\n    ],\r\n    creatures: [\r\n        {\r\n            id: 'bug',\r\n            sprite: 'enemy',\r\n            body: {\r\n                x: 48,\r\n                y: 48,\r\n                w: 38,\r\n                h: 80\r\n            },\r\n            stats: {\r\n                value: {\r\n                    hp: 4,\r\n                    maxHP: 4\r\n                }\r\n            },\r\n            equipment: {\r\n                value: {\r\n                    primaryWeapon: 'testWeapon'\r\n                }\r\n            },\r\n            config: {\r\n                value: {\r\n                    behaviourId: 'testai',\r\n                    movementSpeed: 200,\r\n                    alertRange: 400,\r\n                    attackRange: 60\r\n                }\r\n            },\r\n            animations: [\r\n                {\r\n                    name: 'idle',\r\n                    frames: Helpers.numberArray(3, 6),\r\n                    fps: 3,\r\n                    loops: true\r\n                },\r\n                {\r\n                    name: 'run',\r\n                    frames: Helpers.numberArray(12, 18),\r\n                    fps: 12,\r\n                    loops: true\r\n                },\r\n                {\r\n                    name: 'attack',\r\n                    frames: Helpers.numberArray(1, 3),\r\n                    fps: 10,\r\n                    loops: false\r\n                }\r\n            ]\r\n        }\r\n    ]\r\n};\r\n\r\nexport default gameData;\n\n\n// WEBPACK FOOTER //\n// ./src/stubs/GameData.js","class MixinBuilder {\r\n    constructor(superclass) {\r\n        this.superclass = superclass;\r\n    }\r\n\r\n    with(...mixins) {\r\n        return mixins.reduce((c, mixin) => mixin(c), this.superclass);\r\n    }\r\n}\r\n\r\nexport default (superclass) => new MixinBuilder(superclass);\n\n\n// WEBPACK FOOTER //\n// ./src/helpers/Mix.js","import Helpers from '../helpers/Helpers';\r\nimport Animator from '../animation/Animator';\r\n\r\nclass BaseEntity extends Phaser.Sprite {\r\n\r\n    constructor(game, x, y, name, data) {\r\n\r\n        // Phaser requires all of these to happen\r\n        super(game, x, y, name);\r\n\r\n        game.add.existing(this);\r\n        game.physics.enable(this, Phaser.Physics.ARCADE);\r\n\r\n        // Custom data to expect for this entity\r\n        this.config = {};\r\n        this.stats = {};\r\n        this.equipment = {};\r\n        this.activeWeapon = null;\r\n\r\n        // Define properties with supplied data (TODO: Revise method)\r\n        if (data) {\r\n            Object.defineProperties(this, data);\r\n        }\r\n\r\n        // Flags\r\n        this.busy = false;\r\n        this.disabled = false;\r\n\r\n        // Set the anchor\r\n        this.anchor.x = 0.5;\r\n\r\n        // Animations setup\r\n        this.animator = new Animator(this.animations);\r\n\r\n    }\r\n\r\n    resetMovement() {\r\n\r\n        this.body.velocity.x = 0;\r\n\r\n    }\r\n\r\n    setBody(bodyData) {\r\n\r\n        this.body.setSize(bodyData.x, bodyData.y, bodyData.w, bodyData.h);\r\n        return this;\r\n\r\n    }\r\n\r\n    correctScale(dir) {\r\n\r\n        this.scale.setTo(dir, 1);\r\n\r\n        if (this.activeWeapon)\r\n            this.activeWeapon.scale.setTo(dir, 1);\r\n\r\n    }\r\n\r\n    faceTarget(pos) {\r\n\r\n        this.correctScale(Helpers.getTargetDirection(pos.x, this.x));\r\n\r\n    }\r\n\r\n}\r\n\r\nexport default BaseEntity;\n\n\n// WEBPACK FOOTER //\n// ./src/entities/BaseEntity.js","import NodeTypes from '../enums/TreeNodeTypes';\r\n\r\n/// Consider adding a 'type' property to avoid confusion\r\n// You can do this in JSON, but that's a future plan right now\r\n\r\n/// Following is for reference (remove later):\r\n// {\r\n//     id: \"testai\",\r\n//     root: new b3.Priority({\r\n//         children: [\r\n//             new BoolCheck('inRangeOfAttack', {\r\n//                 child: new Attack()\r\n//             }),\r\n//             new BoolCheck('inRangeOfTarget', {\r\n//                 child: new Follow()\r\n//             }),\r\n//             new SequenceSynced({\r\n//                 children: [\r\n//                     new Roam(true),\r\n//                     new RandomWait()\r\n//                 ]\r\n//             })\r\n//         ]\r\n//     })\r\n// },\r\n\r\nconst TreeData = [\r\n    {\r\n        id: \"testai\",\r\n        root: {\r\n            name: \"Priority\",\r\n            type: NodeTypes.COMPOSITE,\r\n            children: [\r\n                // {\r\n                //     name: \"BoolCheck\",\r\n                //     type: NodeTypes.DECORATOR,\r\n                //     param: \"inRangeOfAttack\",\r\n                //     child: {\r\n                //         name: \"Attack\",\r\n                //         type: NodeTypes.ACTION,\r\n                //         param: null\r\n                //     }\r\n                // },\r\n                // {\r\n                //     name: \"BoolCheck\",\r\n                //     type: NodeTypes.DECORATOR,\r\n                //     param: \"inRangeOfTarget\",\r\n                //     child: {\r\n                //         name: \"Follow\",\r\n                //         type: NodeTypes.ACTION,\r\n                //         param: null\r\n                //     }\r\n                // },\r\n                {\r\n                    name: \"SequenceSynced\",\r\n                    type: NodeTypes.COMPOSITE,\r\n                    children: [\r\n                        {\r\n                            name: \"Roam\",\r\n                            type: NodeTypes.ACTION,\r\n                            param: true\r\n                        },\r\n                        {\r\n                            name: \"RandomWait\",\r\n                            type: NodeTypes.ACTION,\r\n                            param: null\r\n                        }\r\n                    ]\r\n                }\r\n            ]\r\n        }\r\n    }\r\n];\r\n\r\nexport default TreeData;\n\n\n// WEBPACK FOOTER //\n// ./src/stubs/TreeData.js","const TreeNodeTypes = {\r\n    \"ACTION\": 0,\r\n    \"DECORATOR\": 1,\r\n    \"COMPOSITE\": 2\r\n};\r\n\r\nexport default TreeNodeTypes;\n\n\n// WEBPACK FOOTER //\n// ./src/enums/TreeNodeTypes.js","import Weapon from '../entities/Weapon';\r\n\r\nlet AttachedWeapon = (superclass) => class extends superclass {\r\n\r\n    attachWeapon(weaponData, pos) {\r\n\r\n        this.activeWeapon = new Weapon(this.game, 0, 0, weaponData.sprite);\r\n        this.activeWeapon.y += this.activeWeapon.height;\r\n\r\n        if (pos) {\r\n            this.activeWeapon.x = pos.x;\r\n            this.activeWeapon.y = pos.y;\r\n        }\r\n\r\n        this.activeWeapon.setBody(weaponData.body);\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n};\r\n\r\nexport default AttachedWeapon;\n\n\n// WEBPACK FOOTER //\n// ./src/components/AttachedWeapon.js","let HitEffects = (superclass) => class extends superclass {\r\n\r\n    damageFlash() {\r\n\r\n        this.disabled = true;\r\n\r\n        this.alpha = 0;\r\n        this.tint = 0xffffff;\r\n\r\n        this.flashTween = this.game.add.tween(this).to({\r\n            tint: 0xffeeff,\r\n            alpha: 1\r\n        }, 10, \"Linear\", true, 0, -1);\r\n        this.flashTween.yoyo(true, 10);\r\n\r\n        this.game.time.events.add(Phaser.Timer.SECOND * 0.6, function () {\r\n            this.disabled = false;\r\n            this.alpha = 1;\r\n            this.tint = 0xffffff;\r\n            this.flashTween.stop();\r\n        }, this);\r\n\r\n    }\r\n\r\n};\r\n\r\nexport default HitEffects;\n\n\n// WEBPACK FOOTER //\n// ./src/components/HitEffects.js","import 'pixi';\r\nimport 'p2';\r\nimport Phaser from 'phaser';\r\nimport GameState from './states/GameState';\r\n\r\nclass Game extends Phaser.Game {\r\n\r\n  constructor() {\r\n    super(800, 600, Phaser.AUTO, 'phaser-example', null);\r\n\t\tthis.state.add('GameState', GameState, false);\r\n\t\tthis.state.start('GameState');\r\n  }\r\n\r\n}\r\n\r\nnew Game();\n\n\n// WEBPACK FOOTER //\n// ./src/game.js","import 'pixi';\r\nimport 'p2';\r\nimport Phaser from 'phaser';\r\n\r\n//// TODO: Fix the problem with the relative import urls\r\nimport DSMapData from '../stubs/MapData';\r\nimport DSGameData from '../stubs/GameData';\r\nimport WorldBuilder from '../world/WorldBuilder';\r\nimport CreatureFactory from '../factories/CreatureFactory';\r\nimport Hero from '../entities/Hero';\r\n\r\nclass GameState {\r\n\r\n    render() {\r\n\r\n        //this.game.debug.bodyInfo(this.hero, 32, 32);\r\n        //this.game.debug.body(this.hero);\r\n\r\n        // this.game.debug.bodyInfo(this.hero.activeWeapon, 32, 32);\r\n        // this.game.debug.body(this.hero.activeWeapon);\r\n\r\n        // this.enemies.children.forEach((e) => {\r\n        //     this.game.debug.bodyInfo(e.activeWeapon, 32, 32);\r\n        //     this.game.debug.body(e.activeWeapon);\r\n        // });\r\n\r\n    }\r\n\r\n    preload() {\r\n\r\n        this.game.load.spritesheet('player', 'resources/Game/player.png', 128, 128, 20);\r\n        this.game.load.spritesheet('enemy', 'resources/Game/enemy.png', 128, 128, 20);\r\n        this.game.load.image('ground', 'resources/Game/platform tile2.png', 32, 32);\r\n\r\n        // https://phaser.io/examples/v2/loader/load-tilemap-json\r\n        this.game.load.tilemap('level-tilemap', 'resources/Game/maps/world-sheet.json', null, Phaser.Tilemap.TILED_JSON);\r\n        this.game.load.image('world-atlas', 'resources/Tiles/world-sheet.png');\r\n        this.game.load.image('col-atlas', 'resources/Tiles/col.png');\r\n        \r\n        //...\r\n        this.game.load.image('slope-atlas', 'resources/Tiles/arcade-slopes-64.png');\r\n\r\n    }\r\n\r\n    create() {\r\n\r\n        // Load plugins\r\n        this.game.plugins.add(Phaser.Plugin.ArcadeSlopes);\r\n\r\n        // Startup physics\r\n        this.game.physics.startSystem(Phaser.Physics.ARCADE);\r\n        this.game.physics.arcade.gravity.y = 2500; // pixels/second/second\r\n        this.game.physics.arcade.TILE_BIAS = 40; // Prevents strange tile fall-through\r\n\r\n        this.game.stage.backgroundColor = '#2d2d2d';\r\n\r\n        // Create some ground for the player to walk on (this will be replaced by tilesets and proper parsing later)\r\n        let mapData = DSMapData.find(x => x.id === 'testlevel');\r\n        let world = new WorldBuilder(this.game, {\r\n            tilemap: 'level-tilemap',\r\n            layers: [\r\n                {\r\n                    name: 'world-sheet',\r\n                    cacheName: 'world-atlas',\r\n                    worldSizeLayer: true\r\n                },\r\n                {\r\n                    name: 'collidable',\r\n                    cacheName: 'col-atlas',\r\n                    collisionLayer: true\r\n                }\r\n            ]\r\n        });\r\n\r\n        // Should only be one needed per level so this is ok\r\n        this.collisionLayer = world.getCollisionLayer();\r\n\r\n        // Make entities\r\n        this.hero = new Hero(this.game, 250, 700, DSGameData.player.sprite, {\r\n            config: DSGameData.player.config,\r\n            stats: DSGameData.player.stats,\r\n            equipment: DSGameData.player.equipment\r\n        });\r\n\r\n        this.hero.attachWeapon(DSGameData.weapons.find(x => x.id === DSGameData.player.equipment.value.primaryWeapon));\r\n        this.hero.setBody(DSGameData.player.body);\r\n\r\n        if (DSGameData.player.animations && this.hero.animator)\r\n            this.hero.animator.registerMany(DSGameData.player.animations);\r\n\r\n        // Make enemies and things\r\n        this.enemies = this.game.add.group();\r\n        this.enemyWeapons = this.game.add.group();\r\n\r\n        // TODO: Consider making the manifests available globally (no point making it complicated)\r\n        let enemies = mapData.enemies.map(function (d) {\r\n            //return CreatureFactory.make(d.id, d.pos, this.game);\r\n        }, this);\r\n\r\n        // enemies.forEach((creatureSprite) => {\r\n        //     creatureSprite.setTarget(this.hero);\r\n        //     this.enemies.add(creatureSprite);\r\n        //     if (creatureSprite.activeWeapon)\r\n        //         this.enemyWeapons.add(creatureSprite.activeWeapon);\r\n        // });\r\n\r\n        // Finally, enable camera\r\n        this.game.camera.follow(this.hero, Phaser.Camera.FOLLOW_TOPDOWN);\r\n\r\n        /////\r\n        //https://github.com/hexus/phaser-arcade-slopes\r\n        // Experimental (slopes)\r\n        let map = world.gameTileMap;\r\n\r\n        map.addTilesetImage('arcade-slopes-64', 'slope-atlas');\r\n        this.game.slopes.convertTilemapLayer(this.collisionLayer, 'arcadeslopes', 14);\r\n        this.game.slopes.enable(this.hero);\r\n\r\n        this.collisionLayer.debug = true;\r\n\r\n    }\r\n\r\n    update() {\r\n\r\n        this.game.physics.arcade.collide(this.hero, this.collisionLayer);\r\n        this.game.physics.arcade.collide(this.enemies, this.collisionLayer);\r\n\r\n        this.game.physics.arcade.overlap(this.hero.activeWeapon, this.enemies, function (weapon, npc) {\r\n            npc.takeDamage(weapon.damageOutput(), {\r\n                x: weapon.x,\r\n                y: weapon.y\r\n            });\r\n        }, null, this);\r\n\r\n        this.game.physics.arcade.overlap(this.hero, this.enemyWeapons, function (hero, weapon) {\r\n            hero.takeDamage(weapon.damageOutput(), {\r\n                x: weapon.x,\r\n                y: weapon.y\r\n            });\r\n        }, null, this);\r\n\r\n    }\r\n\r\n\r\n}\r\n\r\nexport default GameState;\n\n\n// WEBPACK FOOTER //\n// ./src/states/GameState.js","const MapData = [\r\n    {\r\n        id: \"testlevel\",\r\n        enemies: [\r\n            {\r\n                id: 'bug',\r\n                pos: {\r\n                    x: 150,\r\n                    y: 100\r\n                }\r\n            }\r\n        ]\r\n    }\r\n]\r\n\r\nexport default MapData;\n\n\n// WEBPACK FOOTER //\n// ./src/stubs/MapData.js","class WorldBuilder {\r\n\r\n    constructor(game, data) {\r\n\r\n        this.game = game;\r\n        this.layers = [];\r\n\r\n        //  The 'name' key here is the Loader key given in game.load.tilemap\r\n        this.gameTileMap = this.game.add.tilemap(data.tilemap);\r\n\r\n        //  The first parameter is the tileset name, as specified in the Tiled map editor (and in the tilemap json file)\r\n        //  The second parameter maps this name to the Phaser.Cache key 'tiles'\r\n        for (let i = 0; i < data.layers.length; i++) {\r\n\r\n            let layer = data.layers[i];\r\n            this.gameTileMap.addTilesetImage(layer.name, layer.cacheName);\r\n\r\n            //  Creates a layer from the World1 layer in the map data.\r\n            //  A Layer is effectively like a Phaser.Sprite, so is added to the display list.\r\n            //  If naming from data, make sure it's the right name (see level json).\r\n            this.layers.push({\r\n                layerData: layer,\r\n                phaserLayer: this.gameTileMap.createLayer(i)\r\n            });\r\n\r\n        }\r\n\r\n        // Sanity checks\r\n        if (this.layers.length === 0)\r\n            throw new Error(\"You must have some layers defined.\");\r\n\r\n        // https://phaser.io/docs/2.4.4/Phaser.Tilemap.html#setCollision\r\n        // Mapping the index would be just a matter of checking a property in 'tiled' for example (0 is floor tile in this instance)\r\n        let collision = this.getCollisionLayer();\r\n        if (collision) {\r\n            this.gameTileMap.setCollisionByExclusion([0], true, collision);\r\n        }\r\n\r\n        //  This resizes the game world to match the layer dimensions\r\n        let worldSizeLayer = this.getWorldSizeLayer();\r\n        if (worldSizeLayer) {\r\n            worldSizeLayer.resizeWorld();\r\n        }\r\n\r\n    }\r\n\r\n    getCollisionLayer() {\r\n\r\n        return this.layers.find(x => x.layerData.collisionLayer).phaserLayer;\r\n\r\n    }\r\n\r\n    getWorldSizeLayer() {\r\n\r\n        return this.layers.find(x => x.layerData.worldSizeLayer).phaserLayer;\r\n\r\n    }\r\n\r\n}\r\n\r\nexport default WorldBuilder;\n\n\n// WEBPACK FOOTER //\n// ./src/world/WorldBuilder.js","import Enemy from '../entities/Enemy';\r\nimport GameData from '../stubs/GameData';\r\n\r\nclass CreatureFactory {\r\n\r\n    static make(id, pos, game) {\r\n\r\n        let creatureData = GameData.creatures.find(x => x.id === id),\r\n            creature = new Enemy(game, pos.x, pos.y, creatureData.sprite, {\r\n                config: creatureData.config,\r\n                stats: creatureData.stats,\r\n                equipment: creatureData.equipment\r\n            });\r\n\r\n        creature.attachWeapon(GameData.weapons.find(x => x.id === creatureData.equipment.value.primaryWeapon));\r\n        creature.setBody(creatureData.body);\r\n\r\n        if (creatureData.animations && creature.animator)\r\n            creature.animator.registerMany(creatureData.animations)\r\n\r\n        return creature;\r\n\r\n    }\r\n\r\n}\r\n\r\nexport default CreatureFactory;\n\n\n// WEBPACK FOOTER //\n// ./src/factories/CreatureFactory.js","import mix from '../helpers/Mix';\r\nimport Helpers from '../helpers/Helpers';\r\nimport BaseEntity from '../entities/BaseEntity';\r\nimport Behaviours from '../ai/Behaviours';\r\nimport AttachedWeapon from '../components/AttachedWeapon';\r\nimport HitEffects from '../components/HitEffects';\r\n\r\nclass Enemy extends mix(BaseEntity).with(HitEffects, AttachedWeapon) {\r\n\r\n    constructor(game, x, y, name, data) {\r\n\r\n        super(game, x, y, name, data);\r\n\r\n        if (this.config.behaviourId)\r\n            this.behaviours = new Behaviours(this.config.behaviourId);\r\n\r\n    }\r\n\r\n    update() {\r\n\r\n        this.activeWeapon.anchorTo(this.x, this.y + (this.activeWeapon.height));\r\n\r\n        if (this.disabled && !this.body.onFloor())\r\n            return;\r\n\r\n        if (this.disabled && this.body.onFloor()) {\r\n            // Doesn't quite work\r\n            // this.resetMovement();\r\n            return;\r\n        }\r\n\r\n        this.resetMovement();\r\n\r\n        if (!this.busy)\r\n            this.behaviours.update(this);\r\n\r\n        if (this.currentTarget) {\r\n            let d = Helpers.distance(this, this.currentTarget);\r\n            this.behaviours.setVariable('inRangeOfTarget', d < this.config.alertRange);\r\n            this.behaviours.setVariable('inRangeOfAttack', d < this.config.attackRange);\r\n        }\r\n\r\n        this.animate();\r\n\r\n    }\r\n\r\n    /// AI Movement ///\r\n    move(dir) {\r\n\r\n        if (Helpers.distance(this, this.currentTarget) < this.width / 3 || this.disabled || Helpers.targetWithinBounds(this.currentTarget, this, this.width / 3))\r\n            return;\r\n\r\n        this.body.velocity.x += dir > 0 ? this.config.movementSpeed : -this.config.movementSpeed;\r\n        this.correctScale(dir);\r\n\r\n    }\r\n\r\n    moveTo(pos) {\r\n\r\n        if (this.disabled)\r\n            return;\r\n\r\n        let dir = Helpers.getTargetDirection(pos.x, this.x);\r\n\r\n        // TODO: Might be nice to have a walking anim too.\r\n        this.body.velocity.x += dir > 0 ? this.config.movementSpeed : -this.config.movementSpeed;\r\n        this.correctScale(dir);\r\n\r\n    }\r\n\r\n    /// AI Actions ////\r\n    setTarget(t) {\r\n\r\n        // Be careful with this and the GC. Multiple references can be damaging.\r\n        this.currentTarget = t;\r\n        this.behaviours.setVariable('currentTarget', t);\r\n\r\n    }\r\n\r\n    chaseTarget() {\r\n\r\n        this.move(Helpers.getTargetDirection(this.currentTarget.x, this.x));\r\n\r\n    }\r\n\r\n    attackTarget() {\r\n\r\n        if (this.disabled || this.busy)\r\n            return;\r\n\r\n        this.faceTarget(this.currentTarget);\r\n\r\n        this.busy = true;\r\n        this.priorityAnimation = true;\r\n\r\n        // TODO: Remove magic numbers\r\n        let currentAnim = this.animator.getAnimation('attack'),\r\n            attackStartDelay = Helpers.getRandomInt(200, 500),\r\n            attackEndDelay = Helpers.getRandomInt(200, 500);\r\n\r\n        this.game.time.events.add(attackStartDelay, () => {\r\n\r\n            // We don't play the animation 'until' the attack starts :P\r\n            this.animator.play('attack');\r\n\r\n            this.activeWeapon.use(Helpers.animDuration(currentAnim.speed, currentAnim.frameTotal), () => {\r\n\r\n                this.game.time.events.add(attackEndDelay, () => {\r\n                    this.busy = false;\r\n                }, this);\r\n\r\n            });\r\n\r\n        }, this);\r\n\r\n    }\r\n\r\n    /// Feedback ///\r\n    takeDamage(n, origin) {\r\n\r\n        if (this.disabled)\r\n            return;\r\n\r\n        console.log(this.name + \" is taking damage: \" + n);\r\n        console.log(origin, \"was origin of damage.\");\r\n\r\n        // Important otherwise you might run in to 'ghost' weapons\r\n        this.activeWeapon.disable();\r\n\r\n        // Some cheeky knockback\r\n        this.body.velocity.x = Helpers.getTargetDirection(this.currentTarget.x, this.x) * -300;\r\n        this.body.velocity.y = -300;\r\n\r\n        this.damageFlash();\r\n\r\n    }\r\n\r\n    /// Animations ///\r\n    animate() {\r\n\r\n        // Movement\r\n        if (this.body.velocity.x != 0) {\r\n            this.animator.play('run');\r\n        } else {\r\n            this.animator.play('idle');\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\nexport default Enemy;\n\n\n// WEBPACK FOOTER //\n// ./src/entities/Enemy.js","class Animator {\r\n\r\n    constructor(phaseranimator) {\r\n\r\n        this.animator = phaseranimator;\r\n        this.currentAnim = null;\r\n        this.playWhenDone = '';\r\n\r\n    }\r\n\r\n    registerMany(data) {\r\n\r\n        for(let i = 0; i < data.length; i++) {\r\n            this.register(data[i]);\r\n        }\r\n\r\n    }\r\n\r\n    register(data) {\r\n\r\n        if (this.getAnimation(data.name))\r\n            return;\r\n\r\n        let anim = this.animator.add(data.name, data.frames, data.fps, data.loops);\r\n\r\n        if(!data.loops)\r\n            anim.onComplete.add(this.animDone, this);\r\n\r\n    }\r\n\r\n    getAnimation(str) {\r\n        \r\n        return this.animator.getAnimation(str);\r\n\r\n    }\r\n\r\n    play(str) {\r\n\r\n        // Forces wait for none-looped animations (experimental)\r\n        if(this.currentAnim && !this.currentAnim.loop) {\r\n            this.playWhenDone = str;\r\n            return;\r\n        }\r\n\r\n        let anim = this.animator.play(str);\r\n        this.currentAnim = anim;\r\n\r\n        return anim;\r\n    }\r\n\r\n    animDone() {\r\n\r\n        if(this.playWhenDone.length > 0)\r\n            this.currentAnim = this.animator.play(this.playWhenDone);\r\n                \r\n    }\r\n\r\n}\r\n\r\nexport default Animator;\n\n\n// WEBPACK FOOTER //\n// ./src/animation/Animator.js","// Data\r\nimport DSBehaviours from '../stubs/TreeData';\r\nimport BehaviourFactory from '../factories/BehaviourFactory';\r\n\r\nclass Behaviours {\r\n\r\n    constructor(behaviourId) {\r\n\r\n        // There should probably be only one tree instance, not one per entity\r\n        this.blackboard = new b3.Blackboard();\r\n        this.tree = new b3.BehaviorTree();\r\n\r\n        // Parse behaviour data in to useable tree\r\n        this.tree.root = BehaviourFactory.build(DSBehaviours.find(x => x.id === behaviourId).root);\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    setVariable(str, data) {\r\n\r\n        this.blackboard.set(str, data);\r\n\r\n    }\r\n\r\n    update(target) {\r\n\r\n        this.tree.tick(target, this.blackboard);\r\n\r\n    }\r\n\r\n}\r\n\r\nexport default Behaviours;\n\n\n// WEBPACK FOOTER //\n// ./src/ai/Behaviours.js","// Data\r\nimport NodeTypes from '../enums/TreeNodeTypes';\r\nimport DSBehaviours from '../stubs/TreeData';\r\n\r\n// Actions\r\nimport Idle from '../ai/nodes/actions/Idle';\r\nimport Follow from '../ai/nodes/actions/Follow';\r\nimport Attack from '../ai/nodes/actions/Attack';\r\nimport Roam from '../ai/nodes/actions/Roam';\r\nimport RandomWait from '../ai/nodes/actions/RandomWait';\r\n\r\n// Composites\r\nimport SequenceSynced from '../ai/nodes/composites/SequenceSynced';\r\n\r\n// Conditions\r\nimport InRange from '../ai/nodes/conditions/InRange';\r\nimport InAttackRange from '../ai/nodes/conditions/InAttackRange';\r\n\r\n// Decorators\r\nimport BoolCheck from '../ai/nodes/decorators/BoolCheck';\r\n\r\n// Experimental\r\n// https://k94n.com/es6-modules-single-instance-pattern\r\nconst nodeClasses = {\r\n    'Priority': b3.Priority, // TODO: Fix b3 global in webpack, it's not quite right\r\n    'Idle': Idle,\r\n    'Follow': Follow,\r\n    'Attack': Attack,\r\n    'Roam': Roam,\r\n    'RandomWait': RandomWait,\r\n    'SequenceSynced': SequenceSynced,\r\n    'InRange': InRange,\r\n    'InAttackRange': InAttackRange,\r\n    'BoolCheck': BoolCheck\r\n};\r\n\r\nclass BehaviourFactory {\r\n\r\n    static build(nd) {\r\n\r\n        let CNS = nodeClasses[nd.name],\r\n            children = [],\r\n            child = {};\r\n\r\n        if (!CNS)\r\n            throw new Error(\"Constructor was undefined: \" + nd.name);\r\n\r\n        if (nd.children && nd.children.length > 0) {\r\n\r\n            for (let i = 0; i < nd.children.length; i++) {\r\n                children.push(this.build(nd.children[i]));\r\n            }\r\n\r\n        }\r\n\r\n        if (nd.child)\r\n            child = this.build(nd.child);\r\n\r\n        switch (nd.type) {\r\n            case NodeTypes.ACTION:\r\n                return new CNS(nd.param);\r\n            case NodeTypes.DECORATOR:\r\n                return new CNS(nd.param, { child });\r\n            case NodeTypes.COMPOSITE:\r\n                return new CNS({ children });\r\n            default:\r\n                throw new Error(\"Unrecognized node type:\" + nd.type);\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\nexport default BehaviourFactory;\n\n\n// WEBPACK FOOTER //\n// ./src/factories/BehaviourFactory.js","// https://github.com/renatopp/behavior3js/wiki/Core-04-Creating-Custom-Nodes\r\nclass Idle extends b3.Action {\r\n\r\n    constructor() {\r\n\r\n        super();\r\n        this.name = 'Idle';\r\n\r\n    }\r\n\r\n    open(tick) {\r\n\r\n        // console.log(\"Idle...\");\r\n        // console.log(tick);\r\n\r\n    }\r\n\r\n    tick(tick) {\r\n\r\n        return b3.RUNNING;\r\n\r\n    }\r\n\r\n}\r\n\r\nexport default Idle;\n\n\n// WEBPACK FOOTER //\n// ./src/ai/nodes/actions/Idle.js","import 'b3';\r\n\r\nclass Follow extends b3.Action {\r\n\r\n    constructor() {\r\n\r\n        super();\r\n        this.name = 'Follow';\r\n\r\n    }\r\n\r\n    open(tick) {\r\n\r\n        // console.log(\"Follow...\");\r\n        // console.log(tick);\r\n\r\n    }\r\n\r\n    tick(tick) {\r\n\r\n        tick.target.chaseTarget();\r\n        return b3.RUNNING;\r\n\r\n    }\r\n\r\n}\r\nexport default Follow;\n\n\n// WEBPACK FOOTER //\n// ./src/ai/nodes/actions/Follow.js","import 'b3';\r\n\r\nclass Attack extends b3.Action {\r\n\r\n    constructor() {\r\n        \r\n        super();\r\n        this.name = 'Attack';\r\n\r\n    }\r\n\r\n    open(tick) {\r\n\r\n        tick.target.attackTarget();\r\n\r\n    }\r\n\r\n    tick(tick) {\r\n        \r\n        return tick.target.busy ? b3.RUNNING : b3.SUCCESS;\r\n        \r\n    }\r\n\r\n}\r\n\r\nexport default Attack;\n\n\n// WEBPACK FOOTER //\n// ./src/ai/nodes/actions/Attack.js","import Helpers from '../../../helpers/Helpers';\r\n\r\nclass Roam extends b3.Action {\r\n\r\n    constructor(ignoreY) {\r\n\r\n        super();\r\n\r\n        this.name = 'Roam';\r\n        this.currentLocation = {\r\n            x: 0,\r\n            y: 0\r\n        };\r\n        this.destination = {\r\n            x: 0,\r\n            y: 0\r\n        };\r\n\r\n        this.ignoreY = ignoreY;\r\n\r\n    }\r\n\r\n    open(tick) {\r\n\r\n        this.currentLocation.x = tick.target.x;\r\n        this.currentLocation.y = tick.target.y;\r\n\r\n        this.destination.x = Helpers.getRandomInt(30, 770);\r\n        this.destination.y = tick.target.y;\r\n        \r\n        console.log(\"Roam started...\");\r\n\r\n    }\r\n\r\n    tick(tick) {\r\n\r\n        if (this.ignoreY)\r\n            this.destination.y = tick.target.y;\r\n\r\n        tick.target.moveTo(this.destination);\r\n\r\n        if (Helpers.distance({ x: tick.target.x, y: tick.target.y }, this.destination) < 30) {\r\n            tick.target.resetMovement();\r\n            console.log(\"Destination reached.\");\r\n            return b3.SUCCESS;\r\n        }\r\n\r\n        return b3.RUNNING;\r\n\r\n    }\r\n\r\n}\r\n\r\nexport default Roam;\n\n\n// WEBPACK FOOTER //\n// ./src/ai/nodes/actions/Roam.js","import Helpers from '../../../helpers/Helpers';\r\n\r\nclass RandomWait extends b3.Action {\r\n\r\n    constructor() {\r\n\r\n        super();\r\n        this.name = 'RandomWait';\r\n        this.startTime = 0;\r\n        this.endTime = 0;\r\n\r\n    }\r\n\r\n    open(tick) {\r\n\r\n        this.startTime = (new Date()).getTime();\r\n        this.endTime = Helpers.getRandomInt(1, 3) * 1000;\r\n\r\n        console.log(\"Wait started.\");\r\n\r\n    }\r\n\r\n    tick(tick) {\r\n\r\n        var currTime = (new Date()).getTime();\r\n\r\n        if (currTime - this.startTime > this.endTime) {\r\n          console.log(\"Wait complete.\");\r\n          return b3.SUCCESS;\r\n        }\r\n    \r\n        return b3.RUNNING;\r\n\r\n    }\r\n\r\n}\r\n\r\nexport default RandomWait;\n\n\n// WEBPACK FOOTER //\n// ./src/ai/nodes/actions/RandomWait.js","class SequenceSynced extends b3.Composite {\r\n\r\n    constructor(children) {\r\n\r\n        super(children);\r\n        this.name = \"SequenceSynced\";\r\n        this.i = 0;\r\n\r\n    }\r\n\r\n    tick(tick) {\r\n        \r\n        let status = this.children[this.i]._execute(tick);\r\n\r\n        if(status === b3.SUCCESS) {\r\n\r\n            if(this.i >= this.children.length - 1) {\r\n                this.i = 0;\r\n                return status;\r\n            } else {\r\n                this.i += 1;\r\n            }\r\n\r\n        }\r\n\r\n        return b3.RUNNING;\r\n\r\n    }\r\n\r\n}\r\n\r\nexport default SequenceSynced;\n\n\n// WEBPACK FOOTER //\n// ./src/ai/nodes/composites/SequenceSynced.js","import 'b3';\r\n\r\nclass InRange extends b3.Condition {\r\n\r\n    constructor() {\r\n\r\n        super();\r\n        this.name = 'InRange';\r\n\r\n    }\r\n\r\n    tick(tick) {\r\n\r\n        if (tick.blackboard.get('inRangeOfTarget'))\r\n            return b3.SUCCESS;\r\n\r\n        return b3.FAILURE;\r\n\r\n    }\r\n\r\n}\r\n\r\nexport default InRange;\n\n\n// WEBPACK FOOTER //\n// ./src/ai/nodes/conditions/InRange.js","import 'b3';\r\n\r\nclass InAttackRange extends b3.Condition {\r\n\r\n    constructor() {\r\n\r\n        super();\r\n        this.name = 'InAttackRange';\r\n\r\n    }\r\n\r\n    tick(tick) {\r\n\r\n        if (tick.blackboard.get('inRangeOfAttack'))\r\n            return b3.SUCCESS;\r\n\r\n        return b3.FAILURE;\r\n\r\n    }\r\n\r\n}\r\n\r\nexport default InAttackRange;\n\n\n// WEBPACK FOOTER //\n// ./src/ai/nodes/conditions/InAttackRange.js","import 'b3';\r\n\r\nclass BoolCheck extends b3.Decorator {\r\n\r\n    constructor(propertyName, child) {\r\n\r\n        super(child);\r\n        this.name = 'BoolCheck';\r\n        this.propertyName = propertyName;\r\n\r\n    }\r\n\r\n    tick(tick) {\r\n\r\n        if (!this.child) {\r\n            return b3.ERROR;\r\n        }\r\n\r\n        if(tick.blackboard.get(this.propertyName)) {\r\n            this.child._execute(tick);\r\n            return b3.SUCCESS;\r\n        }\r\n\r\n        return b3.FAILURE;\r\n\r\n    }\r\n\r\n}\r\n\r\nexport default BoolCheck;\n\n\n// WEBPACK FOOTER //\n// ./src/ai/nodes/decorators/BoolCheck.js","class Weapon extends Phaser.Sprite {\r\n\r\n    constructor(game, x, y, name) {\r\n\r\n        super(game, x, y, name);\r\n\r\n        game.add.existing(this);\r\n        game.physics.arcade.enable(this);\r\n\r\n        this.name = name;\r\n        this.body.allowGravity = false;\r\n        this.body.enable = false;\r\n        this.alpha = 0.3;\r\n\r\n        // You can override this\r\n        this.stats = {\r\n            damageOutput: 1\r\n        };\r\n\r\n        // Set the anchor\r\n        this.anchor.x = 0.5;\r\n\r\n    }\r\n\r\n    use(time, onComplete) {\r\n\r\n        // TODO: To clean up properly. :P It'd be pretty useful to sniff the animation for it to get the timings.\r\n        // Don't forget though, the weapon must sync with the thing that's using it (as if it's attached), can make\r\n        // this more advanced but for now it matters not.\r\n        if (this.body.enabled)\r\n            return;\r\n\r\n        this.body.enable = true;\r\n        //this.alpha = 1;\r\n\r\n        this.game.time.events.add(time, () => {\r\n            this.body.enable = false;\r\n            //this.alpha = 0;\r\n            if (typeof onComplete === 'function')\r\n                onComplete.call(this);\r\n        }, this);\r\n\r\n    }\r\n\r\n    disable() {\r\n\r\n        this.body.enable = false;\r\n\r\n    }\r\n\r\n    damageOutput() {\r\n\r\n        return this.stats.damageOutput;\r\n\r\n    }\r\n\r\n    setBody(d) {\r\n\r\n        this.body.setSize(d.x, d.y, d.w, d.h);\r\n\r\n    }\r\n\r\n    anchorTo(x, y) {\r\n\r\n        this.x = x;\r\n        this.y = y;\r\n\r\n    }\r\n\r\n}\r\n\r\nexport default Weapon;\n\n\n// WEBPACK FOOTER //\n// ./src/entities/Weapon.js","import mix from '../helpers/Mix';\r\nimport Helpers from '../helpers/Helpers';\r\nimport BaseEntity from '../entities/BaseEntity';\r\nimport InputManager from '../components/InputManager';\r\nimport AttachedWeapon from '../components/AttachedWeapon';\r\nimport HitEffects from '../components/HitEffects';\r\n\r\nclass Hero extends mix(BaseEntity).with(InputManager, HitEffects, AttachedWeapon) {\r\n\r\n    constructor(game, x, y, name, data) {\r\n\r\n        super(game, x, y, name, data);\r\n\r\n        this.body.collideWorldBounds = true;\r\n        this.itype = '';\r\n\r\n        this.jumps = 2;\r\n        this.jumping = false;\r\n        this.onFloor = false;\r\n\r\n        this.initManualInput();\r\n\r\n    }\r\n\r\n    update() {\r\n\r\n        this.activeWeapon.anchorTo(this.x, this.y + (this.activeWeapon.height));\r\n\r\n        if (this.disabled && !this.body.onFloor())\r\n            return;\r\n\r\n        if (this.disabled && this.body.onFloor()) {\r\n            // Doesn't quite work\r\n            // this.resetMovement();\r\n            return;\r\n        }\r\n\r\n        this.inputUpdate();\r\n        this.animate();\r\n\r\n    }\r\n\r\n    /// Manual Input ///\r\n    inputUpdate(inputType) {\r\n\r\n        this.resetMovement();\r\n\r\n        if (this.leftInputIsActive()) {\r\n            this.body.velocity.x += -this.config.movementSpeed;\r\n            this.correctScale(-1);\r\n        } else if (this.rightInputIsActive()) {\r\n            this.body.velocity.x += this.config.movementSpeed;\r\n            this.correctScale(1);\r\n        }\r\n\r\n        if (this.body.onFloor()) {\r\n            this.jumps = 2;\r\n            this.jumping = false;\r\n        }\r\n\r\n        // Jump! Keep y velocity constant while the jump button is held for up to 150 ms\r\n        if (this.jumps > 0 && this.upInputIsActive(150)) {\r\n            this.body.velocity.y = this.config.jumpSpeed;\r\n            this.jumping = true;\r\n        }\r\n\r\n        // Reduce the number of available jumps if the jump input is released\r\n        if (this.jumping && this.upInputReleased()) {\r\n            this.jumps--;\r\n            this.jumping = false;\r\n        }\r\n\r\n    }\r\n\r\n    /// Actions ///\r\n    attack() {\r\n\r\n        // Sometimes returns null, not sure why...\r\n        let currentAnim = this.animator.play('attack');\r\n\r\n        if (currentAnim)\r\n            this.activeWeapon.use(Helpers.animDuration(currentAnim.speed, currentAnim.frameTotal));\r\n\r\n    }\r\n\r\n    /// Feedback ///\r\n    takeDamage(n, origin) {\r\n\r\n        if (this.disabled)\r\n            return;\r\n\r\n        console.log(this.name + \" is taking damage: \" + n);\r\n        console.log(origin, \"was origin of damage.\");\r\n\r\n        this.activeWeapon.disable();\r\n\r\n        // Some cheeky knockback\r\n        this.body.velocity.x = Helpers.getTargetDirection(origin.x, this.x) * -300;\r\n        this.body.velocity.y = -300;\r\n\r\n        this.damageFlash();\r\n\r\n    }\r\n\r\n    /// Animations ///\r\n    animate() {\r\n\r\n        // Jumping\r\n        if (this.body.velocity.y !== 0) {\r\n\r\n            if (this.body.velocity.y < 0) {\r\n                this.animator.play('jump');\r\n            } else {\r\n                this.animator.play('fall');\r\n            }\r\n\r\n            return;\r\n\r\n        }\r\n\r\n        // Movement\r\n        if (this.body.velocity.x !== 0) {\r\n            this.animator.play('run');\r\n        } else {\r\n            this.animator.play('idle');\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\nexport default Hero;\n\n\n// WEBPACK FOOTER //\n// ./src/entities/Hero.js","let InputManager = (superclass) => class extends superclass {\r\n\r\n    initManualInput() {\r\n\r\n        // Capture certain keys to prevent their default actions in the browser.\r\n        // This is only necessary because this is an HTML5 game. Games on other\r\n        // platforms may not need code like this.\r\n        this.game.input.keyboard.addKeyCapture([\r\n            Phaser.Keyboard.LEFT,\r\n            Phaser.Keyboard.RIGHT,\r\n            Phaser.Keyboard.UP,\r\n            Phaser.Keyboard.DOWN\r\n        ]);\r\n\r\n        this.attackKey = this.game.input.keyboard.addKey(Phaser.Keyboard.CONTROL);\r\n\r\n        // Based on an assumption (not great but I know it's there)\r\n        this.attackKey.onDown.add(this.attack, this);\r\n\r\n    }\r\n\r\n    // This function should return true when the player activates the \"go left\" control\r\n    // In this case, either holding the right arrow or tapping or clicking on the left\r\n    // side of the screen.\r\n    leftInputIsActive() {\r\n        let isActive = false;\r\n\r\n        isActive = this.game.input.keyboard.isDown(Phaser.Keyboard.LEFT);\r\n        isActive |= (this.game.input.activePointer.isDown &&\r\n            this.game.input.activePointer.x < this.game.width / 4);\r\n\r\n        return isActive;\r\n    }\r\n\r\n    // This function should return true when the player activates the \"go right\" control\r\n    // In this case, either holding the right arrow or tapping or clicking on the right\r\n    // side of the screen.\r\n    rightInputIsActive() {\r\n        let isActive = false;\r\n\r\n        isActive = this.game.input.keyboard.isDown(Phaser.Keyboard.RIGHT);\r\n        isActive |= (this.game.input.activePointer.isDown &&\r\n            this.game.input.activePointer.x > this.game.width / 2 + this.game.width / 4);\r\n\r\n        return isActive;\r\n    }\r\n\r\n    // This function should return true when the player activates the \"jump\" control\r\n    // In this case, either holding the up arrow or tapping or clicking on the center\r\n    // part of the screen.\r\n    upInputIsActive(duration) {\r\n        let isActive = false;\r\n\r\n        isActive = this.game.input.keyboard.downDuration(Phaser.Keyboard.UP, duration);\r\n        isActive |= (this.game.input.activePointer.justPressed(duration + 1000 / 60) &&\r\n            this.game.input.activePointer.x > this.game.width / 4 &&\r\n            this.game.input.activePointer.x < this.game.width / 2 + this.game.width / 4);\r\n\r\n        return isActive;\r\n    }\r\n\r\n    // This function returns true when the player releases the \"jump\" control\r\n    upInputReleased() {\r\n        let released = false;\r\n\r\n        released = this.game.input.keyboard.upDuration(Phaser.Keyboard.UP);\r\n        released |= this.game.input.activePointer.justReleased();\r\n\r\n        return released;\r\n    }\r\n\r\n};\r\n\r\nexport default InputManager;\n\n\n// WEBPACK FOOTER //\n// ./src/components/InputManager.js"],"sourceRoot":""}