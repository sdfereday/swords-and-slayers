webpackJsonp([0],[,,,,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(){d.debug.bodyInfo(this.hero,32,32),d.debug.body(this.hero)}function i(){d.load.spritesheet("player","resources/Game/player.png",128,128,18),d.load.image("ground","resources/Game/platform tile2.png",32,32)}function a(){this.game.physics.startSystem(s.default.Physics.ARCADE),this.game.stage.backgroundColor="#2d2d2d",this.game.input.keyboard.addKeyCapture([s.default.Keyboard.LEFT,s.default.Keyboard.RIGHT,s.default.Keyboard.UP,s.default.Keyboard.DOWN]),this.attackKey=this.game.input.keyboard.addKey(s.default.Keyboard.CONTROL),this.attackKey.onDown.add(function(){this.activeWeapon.use()},this),this.ground=this.game.add.group();for(var e=0;e<this.game.width;e+=32){var t=this.game.add.sprite(e,this.game.height-32,"ground");this.game.physics.enable(t,s.default.Physics.ARCADE),t.body.immovable=!0,t.body.allowGravity=!1,this.ground.add(t)}this.hero=new f.default(d,120,100,"player"),this.hero.frame=1,this.hero.body.setSize(48,48,48,80);var n={x:this.hero.x/2,y:this.hero.y/2};this.activeWeapon=new b.default(d,n.x,n.y,"weapon-gfx"),this.hero.addChild(this.activeWeapon),this.activeWeapon.x+=this.activeWeapon.width,this.activeWeapon.y+=this.activeWeapon.height,this.enemies=d.add.group();var r=new h.default(d,90,100,"player");this.enemies.add(r),r.setTarget(this.hero)}function u(){this.game.physics.arcade.collide(this.hero,this.ground),this.game.physics.arcade.collide(this.enemies,this.ground),this.game.physics.arcade.overlap(this.activeWeapon,this.enemies,function(e,t){t.takeDamage(e.damageOutput(),{x:e.x,y:e.y})},null,this)}n(2),n(3);var c=n(4),s=r(c),l=n(10),f=r(l),p=n(13),h=r(p),y=n(20),b=r(y),d=new s.default.Game(800,600,s.default.AUTO,"phaser-example",{preload:i,create:a,update:u,render:o})},,,,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(11),s=r(c),l=n(12),f=r(l),p=function(e){function t(e,n,r,a){o(this,t);var u=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,r,a));return e.add.existing(u),e.physics.arcade.enable(u),u.id="???",u.name=a,u.stats={hp:4,maxHp:4},u.config={movementSpeed:200},u.MAX_SPEED=500,u.ACCELERATION=1500,u.DRAG=600,u.GRAVITY=2600,u.JUMP_SPEED=-700,u.body.collideWorldBounds=!0,u.body.maxVelocity.setTo(u.MAX_SPEED,10*u.MAX_SPEED),u.body.drag.setTo(u.DRAG,0),e.physics.arcade.gravity.y=u.GRAVITY,u.jumping=!1,u}return a(t,e),u(t,[{key:"update",value:function(){this.leftInputIsActive()?this.body.velocity.x=-this.ACCELERATION:this.rightInputIsActive()?this.body.velocity.x=this.ACCELERATION:this.body.velocity.x=0,this.body.touching.down&&(this.jumps=2,this.jumping=!1),this.jumps>0&&this.upInputIsActive(150)&&(this.body.velocity.y=this.JUMP_SPEED,this.jumping=!0),this.jumping&&this.upInputReleased()&&(this.jumps--,this.jumping=!1)}}]),t}((0,s.default)(Phaser.Sprite).with(f.default));t.default=p},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t){r(this,e),this.superclass=t}return o(e,[{key:"with",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(function(e,t){return t(e)},this.superclass)}}]),e}();t.default=function(e){return new i(e)}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(e){return function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),a(t,[{key:"leftInputIsActive",value:function(){var e=!1;return e=this.game.input.keyboard.isDown(Phaser.Keyboard.LEFT),e|=this.game.input.activePointer.isDown&&this.game.input.activePointer.x<this.game.width/4}},{key:"rightInputIsActive",value:function(){var e=!1;return e=this.game.input.keyboard.isDown(Phaser.Keyboard.RIGHT),e|=this.game.input.activePointer.isDown&&this.game.input.activePointer.x>this.game.width/2+this.game.width/4}},{key:"upInputIsActive",value:function(e){var t=!1;return t=this.game.input.keyboard.downDuration(Phaser.Keyboard.UP,e),t|=this.game.input.activePointer.justPressed(e+1e3/60)&&this.game.input.activePointer.x>this.game.width/4&&this.game.input.activePointer.x<this.game.width/2+this.game.width/4}},{key:"upInputReleased",value:function(){var e=!1;return e=this.game.input.keyboard.upDuration(Phaser.Keyboard.UP),e|=this.game.input.activePointer.justReleased()}}]),t}(e)};t.default=u},function(e,t,n){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(14),s=r(c),l=n(15),f=r(l),p=n(16),h=r(p),y=n(17),b=r(y),d=n(18),g=r(d),v=n(19),m=r(v),w=function(t){function n(t,r,a,u){o(this,n);var c=i(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t,r,a,u));return t.add.existing(c),t.physics.arcade.enable(c),c.id="???",c.name=u,c.stats={hp:4,maxHp:4},c.config={movementSpeed:200,alertRange:300,attackRange:100},c.currentWeapon={animTime:1e3},c.currentTarget=null,c.attacking=!1,c.blackboard=new e.Blackboard,c.tree=new e.BehaviorTree,c.tree.root=new e.Priority({children:[new e.Sequence({children:[new m.default,new b.default]}),new e.Sequence({children:[new g.default,new h.default]}),new e.Sequence({children:[new f.default]})]}),c}return a(n,t),u(n,[{key:"update",value:function(){if(this.body.velocity.x=0,this.tree.tick(this,this.blackboard),this.currentTarget){var e=s.default.Dist(this,this.currentTarget);this.blackboard.set("inRangeOfTarget",e<this.config.alertRange),this.blackboard.set("inRangeOfAttack",e<this.config.attackRange)}}},{key:"chaseTarget",value:function(){var e=this.getTargetDirection(this.blackboard.get("currentTarget").x);this.move(e)}},{key:"attackTarget",value:function(){console.log("Attack target start."),this.attacking=!0,setTimeout(this.onAttackComplete.bind(this),this.currentWeapon.animTime)}},{key:"onAttackComplete",value:function(){console.log("Attack target finish."),this.attacking=!1}},{key:"move",value:function(e){s.default.Dist(this,this.currentTarget)<5||(this.body.velocity.x+=e>0?this.config.movementSpeed:-this.config.movementSpeed)}},{key:"getTargetDirection",value:function(e){return e>this.x?1:-1}},{key:"setTarget",value:function(e){this.currentTarget=e,this.blackboard.set("currentTarget",this.currentTarget)}},{key:"takeDamage",value:function(e,t){console.log(this.name+" is taking damage: "+e),console.log(t,"was origin of damage.")}}]),n}(Phaser.Sprite);t.default=w}).call(t,n(0))},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){r(this,e)}return o(e,null,[{key:"Dist",value:function(e,t){var n=e.x-t.x,r=e.y-t.y;return Math.sqrt(n*n+r*r)}}]),e}();t.default=i},function(e,t,n){"use strict";(function(e){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(t){function a(){n(this,a);var e=r(this,(a.__proto__||Object.getPrototypeOf(a)).call(this));return e.name="Idle",e}return o(a,t),i(a,[{key:"open",value:function(e){console.log("Idle..."),console.log(e)}},{key:"tick",value:function(t){return e.RUNNING}}]),a}(e.Action);t.default=a}).call(t,n(0))},function(e,t,n){"use strict";(function(e){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();n(0);var u=function(t){function n(){r(this,n);var e=o(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.name="Follow",e}return i(n,t),a(n,[{key:"open",value:function(e){console.log("Follow..."),console.log(e)}},{key:"tick",value:function(t){return t.target.chaseTarget(),e.RUNNING}}]),n}(e.Action);t.default=u}).call(t,n(0))},function(e,t,n){"use strict";(function(e){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();n(0);var u=function(t){function n(){r(this,n);var e=o(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.name="Attack",e}return i(n,t),a(n,[{key:"open",value:function(e){console.log("Attack..."),console.log(e),e.target.attackTarget()}},{key:"tick",value:function(t){return t.target.attacking?e.RUNNING:e.SUCCESS}}]),n}(e.Action);t.default=u}).call(t,n(0))},function(e,t,n){"use strict";(function(e){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();n(0);var u=function(t){function n(){r(this,n);var e=o(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.name="InRange",e}return i(n,t),a(n,[{key:"tick",value:function(t){return t.blackboard.get("inRangeOfTarget")?e.SUCCESS:e.FAILURE}}]),n}(e.Condition);t.default=u}).call(t,n(0))},function(e,t,n){"use strict";(function(e){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();n(0);var u=function(t){function n(){r(this,n);var e=o(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.name="InAttackRange",e}return i(n,t),a(n,[{key:"tick",value:function(t){return t.blackboard.get("inRangeOfAttack")?e.SUCCESS:e.FAILURE}}]),n}(e.Condition);t.default=u}).call(t,n(0))},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(e){function t(e,n,i,a){r(this,t);var u=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,i,a));return e.add.existing(u),e.physics.arcade.enable(u),u.id="???",u.name=a,u.body.allowGravity=!1,u.body.enable=!1,u.alpha=0,u.stats={damageOutput:1},u}return i(t,e),a(t,[{key:"damageOutput",value:function(){return this.stats.damageOutput}},{key:"use",value:function(){if(!this.body.enabled){this.body.enable=!0,this.alpha=1;var e=this;setTimeout(function(){e.body.enable=!1,e.alpha=0},100)}}}]),t}(Phaser.Sprite);t.default=u}],[5]);