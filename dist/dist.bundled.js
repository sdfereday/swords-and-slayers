webpackJsonp([0],[,function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){r(this,e)}return a(e,null,[{key:"distance",value:function(e,t){var n=e.x-t.x,r=e.y-t.y;return Math.sqrt(n*n+r*r)}},{key:"numberArray",value:function(e,t){for(var n=[],r=e;r<t;r+=1)n.push(r);return n}},{key:"animDuration",value:function(e,t){return e*t*10}},{key:"getRandomInt",value:function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e))+e}},{key:"getTargetDirection",value:function(e,t){return e>t?1:-1}},{key:"targetWithinBounds",value:function(e,t,n){return e&&e.x>t.x-n&&e.x<t.x+n}}]),e}();t.default=o},,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),a=function(e){return e&&e.__esModule?e:{default:e}}(r),o={player:{id:"player",sprite:"player",body:{x:48,y:48,w:38,h:80},stats:{value:{hp:4,maxHP:4}},equipment:{value:{primaryWeapon:"testWeapon"}},config:{value:{movementSpeed:100,jumpSpeed:-200}},animations:[{name:"idle",frames:a.default.numberArray(3,6),fps:3,loops:!0},{name:"run",frames:a.default.numberArray(12,18),fps:12,loops:!0},{name:"attack",frames:a.default.numberArray(1,3),fps:10,loops:!1},{name:"jump",frames:[7],fps:8,loops:!1},{name:"fall",frames:[18],fps:8,loops:!1}]},weapons:[{id:"testWeapon",sprite:"test-wep",weaponProperties:{value:{dmg:1,animTime:1e3}},body:{x:48,y:64,w:32,h:32}}],actors:[{id:"penny",sprite:"player",body:{x:48,y:48,w:38,h:80},config:{value:{movementSpeed:100,jumpSpeed:-200}},animations:[{name:"idle",frames:a.default.numberArray(3,6),fps:3,loops:!0},{name:"run",frames:a.default.numberArray(12,18),fps:12,loops:!0},{name:"attack",frames:a.default.numberArray(1,3),fps:10,loops:!1},{name:"jump",frames:[7],fps:8,loops:!1},{name:"fall",frames:[18],fps:8,loops:!1}]},{id:"mum",sprite:"player",body:{x:48,y:48,w:38,h:80},config:{value:{movementSpeed:100,jumpSpeed:-200}},animations:[{name:"idle",frames:a.default.numberArray(3,6),fps:3,loops:!0},{name:"run",frames:a.default.numberArray(12,18),fps:12,loops:!0},{name:"attack",frames:a.default.numberArray(1,3),fps:10,loops:!1},{name:"jump",frames:[7],fps:8,loops:!1},{name:"fall",frames:[18],fps:8,loops:!1}]}],creatures:[{id:"bug",sprite:"enemy",body:{x:48,y:48,w:38,h:80},stats:{value:{hp:4,maxHP:4}},equipment:{value:{primaryWeapon:"testWeapon"}},config:{value:{behaviourId:"testai",movementSpeed:200,alertRange:400,attackRange:60}},animations:[{name:"idle",frames:a.default.numberArray(3,6),fps:3,loops:!0},{name:"run",frames:a.default.numberArray(12,18),fps:12,loops:!0},{name:"attack",frames:a.default.numberArray(1,3),fps:10,loops:!1}]}]};t.default=o},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=[{id:"testlevel",world:{tilemap:"level-tilemap",layers:[{name:"world-sheet",cacheName:"world-atlas",worldSizeLayer:!0},{name:"colliders",cacheName:"col-atlas",collisionLayer:!0},{name:"foreground",cacheName:"world-atlas",foregroundLayer:!0}]},enemies:[{id:"bug",pos:{x:50,y:0}}]},{id:"introduction",world:{tilemap:"level-introduction",layers:[{name:"world-sheet",cacheName:"world-atlas",worldSizeLayer:!0},{name:"colliders",cacheName:"col-atlas",collisionLayer:!0},{name:"foreground",cacheName:"world-atlas",foregroundLayer:!0}]},actors:[{id:"penny",pos:{x:50,y:0}},{id:"mum",pos:{x:50,y:0}}]}];t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(28),a=function(e){return e&&e.__esModule?e:{default:e}}(r),o=[{id:"scene-1",sequence:[{name:"Talk",type:a.default.TALK,data:{targetId:"mum",str:"...Why don't we discuss this inside {{playername}}?"}},{name:"Talk",type:a.default.TALK,data:{targetId:"penny",str:"There's nothing to discuss mum, I never wanted to move!"}},{name:"Talk",type:a.default.TALK,data:{targetId:"mum",str:"I'm... I'm sorry... but we couldn't manage without your father..."}},{name:"Talk",type:a.default.TALK,data:{targetId:"penny",str:"That's just like you to blame him even now he's gone!"}},{name:"Talk",type:a.default.TALK,data:{targetId:"mum",str:"{{playername}}... please don't say that... you're not being fair..."}},{name:"Parallel",type:a.default.PARALLEL,waitForInput:!1,children:[{name:"Talk",targetId:"player",type:a.default.TALK,data:{targetId:"penny",str:"Enough already! I need time alone. Anywhere but here."}},{name:"Move",type:a.default.MOVE,data:{targetId:"penny",speed:200,x:0,y:0}}]},{name:"Talk",type:a.default.TALK,data:{targetId:"mum",str:"{{playername}} wait! Come back! It's too dangerous in the forest alone!"}},{name:"Anim",type:a.default.ANIM,waitForInput:!1,data:{targetId:"mum",animName:"runstumble"}}]}];t.default=o},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t){r(this,e),this.game=t,this.layers=[],this.gameTileMap={}}return a(e,[{key:"initializeWorld",value:function(e){this.gameTileMap=this.game.add.tilemap(e.tilemap);for(var t=0;t<e.layers.length;t++){var n=e.layers[t];this.gameTileMap.addTilesetImage(n.name,n.cacheName),this.layers.push({layerData:n,phaserLayer:this.gameTileMap.createLayer(t)})}if(0===this.layers.length)throw new Error("You must have some layers defined.");var r=this.getLayerByProperty("collisionLayer");r&&(this.gameTileMap.setCollisionByExclusion([0],!0,r.phaserLayer),r.phaserLayer.alpha=0,this.game.slopes&&this.game.slopes.convertTilemapLayer(r.phaserLayer,"arcadeslopes",this.getTilesetByName(r.layerData.name).firstgid));var a=this.getLayerByProperty("worldSizeLayer");a&&a.phaserLayer.resizeWorld(),this.game.slopes.preferY=!0}},{key:"postProcess",value:function(){for(var e=0;e<this.layers.length;e++)this.layers[e].layerData.foregroundLayer&&this.layers[e].phaserLayer.bringToTop()}},{key:"getLayerByProperty",value:function(e){return this.layers.find(function(t){return t.layerData[e]})}},{key:"getTilesetByName",value:function(e){return this.gameTileMap.tilesets.find(function(t){return t.name===e})}},{key:"enableSlopesFor",value:function(e){this.game.slopes.enable(e);e.body.slopes.preferY=!0,e.body.slopes.pullDown=150,e.body.slopes.pullBottomLeft=150,e.body.slopes.pullBottomRight=150,e.body.slopes.pullTopLeft=150,e.body.slopes.pullTopRight=150}}]),e}();t.default=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(30),u=r(i),s=n(7),l=r(s),c=function(){function e(){a(this,e)}return o(e,null,[{key:"make",value:function(e,t,n){var r=l.default.creatures.find(function(t){return t.id===e});if(!r)throw new Error("Cannot find a creature with the id '"+e+"'.");var a=new u.default(n,t.x,t.y,r.sprite,{config:r.config,stats:r.stats,equipment:r.equipment});return a.attachWeapon(l.default.weapons.find(function(e){return e.id===r.equipment.value.primaryWeapon})),r.animations&&a.animator&&a.animator.registerMany(r.animations),a}}]),e}();t.default=c},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t){r(this,e),this.superclass=t}return a(e,[{key:"with",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(function(e,t){return t(e)},this.superclass)}}]),e}();t.default=function(e){return new o(e)}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1),l=r(s),c=n(31),f=r(c),p=function(e){function t(e,n,r,i,u){a(this,t);var s=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,r,i));return e.add.existing(s),e.physics.enable(s,Phaser.Physics.ARCADE),s.config={},s.stats={},s.equipment={},s.activeWeapon=null,s.mountData(u),s.busy=!1,s.disabled=!1,s.justGotHit=!1,s.anchor.x=.5,s.animations&&(s.animator=new f.default(s.animations)),s}return i(t,e),u(t,[{key:"mountData",value:function(e){e.config&&Object.defineProperties(this.config,e.config),e.stats&&Object.defineProperties(this.stats,e.stats),e.equipment&&Object.defineProperties(this.equipment,e.equipment),e.body&&this.body.setSize(e.body.x,e.body.y,e.body.w,e.body.h)}},{key:"resetMovement",value:function(){this.body.velocity.x=0}},{key:"correctScale",value:function(e){this.scale.setTo(e,1),this.activeWeapon&&this.activeWeapon.scale.setTo(e,1)}},{key:"faceTarget",value:function(e){this.correctScale(l.default.getTargetDirection(e.x,this.x))}}]),t}(Phaser.Sprite);t.default=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(16),a=function(e){return e&&e.__esModule?e:{default:e}}(r),o=[{id:"testai",root:{name:"Priority",type:a.default.COMPOSITE,children:[{name:"SequenceSynced",type:a.default.COMPOSITE,children:[{name:"Roam",type:a.default.ACTION,param:!0},{name:"RandomWait",type:a.default.ACTION,param:null}]}]}}];t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={ACTION:0,DECORATOR:1,COMPOSITE:2};t.default=r},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(43),s=function(e){return e&&e.__esModule?e:{default:e}}(u),l=function(e){return function(e){function t(){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),i(t,[{key:"attachWeapon",value:function(e,t){return this.activeWeapon=new s.default(this.game,0,0,e.sprite),this.activeWeapon.y+=this.activeWeapon.height,t&&(this.activeWeapon.x=t.x,this.activeWeapon.y=t.y),this.activeWeapon.setBody(e.body),this}}]),t}(e)};t.default=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(e){return function(e){function t(){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),i(t,[{key:"damageFlash",value:function(){this.disabled=!0,this.alpha=0,this.tint=16777215,this.flashTween=this.game.add.tween(this).to({tint:16772863,alpha:1},10,"Linear",!0,0,-1),this.flashTween.yoyo(!0,10),this.game.time.events.add(.6*Phaser.Timer.SECOND,function(){this.disabled=!1,this.alpha=1,this.tint=16777215,this.flashTween.stop()},this)}}]),t}(e)};t.default=u},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(13),l=r(s),c=n(1),f=r(c),p=n(14),h=r(p),d=n(44),y=r(d),b=n(17),m=r(b),v=n(18),g=r(v),w=function(e){function t(e,n,r,i,u){a(this,t);var s=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,r,i,u));return s.body.collideWorldBounds=!0,s.jumps=2,s.jumping=!1,s.initManualInput(),s}return i(t,e),u(t,[{key:"update",value:function(){if(this.activeWeapon&&this.activeWeapon.anchorTo(this.x,this.y+this.activeWeapon.height),!this.disabled||this.body.touching.down)return this.disabled&&this.justGotHit&&this.body.touching.down?void(this.justGotHit=!1):void this.inputUpdate()}},{key:"inputUpdate",value:function(e){this.resetMovement(),this.leftInputIsActive()?(this.body.velocity.x+=-this.config.movementSpeed,this.correctScale(-1)):this.rightInputIsActive()&&(this.body.velocity.x+=this.config.movementSpeed,this.correctScale(1)),this.body.touching.down&&(this.jumps=2,this.jumping=!1),this.jumps>0&&this.upInputIsActive(150)&&(this.body.velocity.y=this.config.jumpSpeed,this.jumping=!0),this.jumping&&this.upInputReleased()&&(this.jumps--,this.jumping=!1)}},{key:"attack",value:function(){var e=this.animator.play("attack");e&&this.activeWeapon.use(f.default.animDuration(e.speed,e.frameTotal))}},{key:"takeDamage",value:function(e,t){this.disabled||(this.justGotHit=!1,console.log(this.name+" is taking damage: "+e),console.log(t,"was origin of damage."),this.activeWeapon.disable(),this.body.velocity.x=-300*f.default.getTargetDirection(t.x,this.x),this.body.velocity.y=-300,this.damageFlash())}},{key:"animate",value:function(){if(!this.body.touching.down)return void(this.body.velocity.y<0?this.animator.play("jump"):this.animator.play("fall"));0!==this.body.velocity.x?this.animator.play("run"):this.animator.play("idle")}}]),t}((0,l.default)(h.default).with(y.default,g.default,m.default));t.default=w},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n(2),n(3);var u=n(4),s=r(u),l=n(25),c=r(l),f=n(45),p=r(f);new(function(e){function t(){a(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,192,108,s.default.AUTO,"phaser-example",null));return e.state.add("SceneState",c.default,!1),e.state.add("GameState",p.default,!1),e.state.start("SceneState"),e}return i(t,e),t}(s.default.Game))},,,,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();n(2),n(3);var i=n(4),u=r(i),s=n(6),l=(r(s),n(9)),c=r(l),f=n(7),p=(r(f),n(10)),h=(r(p),n(26)),d=r(h),y=n(11),b=(r(y),n(51)),m=r(b),v=n(19),g=(r(v),function(){function e(){a(this,e)}return o(e,[{key:"preload",value:function(){this.game.scale.scaleMode=u.default.ScaleManager.USER_SCALE,this.game.scale.setUserScale(6,6),this.game.renderer.renderSession.roundPixels=!0,u.default.Canvas.setImageRenderingCrisp(this.game.canvas),this.game.load.image("bg","resources/Game/background.png",256,124),this.game.load.spritesheet("waters","resources/Game/waterfall.png",16,16),this.game.load.spritesheet("watersrp","resources/Game/waterfall-rp.png",16,16),this.game.load.image("player","resources/Game/player-lr.png",16,16),this.game.load.image("enemy","resources/Game/enemy-lr.png",16,16),this.game.load.tilemap("level-tilemap","resources/Game/maps/world-sheet.json",null,u.default.Tilemap.TILED_JSON),this.game.load.image("world-atlas","resources/Tiles/world-sheet.png"),this.game.load.image("col-atlas","resources/Tiles/arcade-slopes-16.png")}},{key:"create",value:function(){var e=this;this.game.physics.startSystem(u.default.Physics.ARCADE),this.game.physics.arcade.gravity.y=1200,this.game.physics.arcade.TILE_BIAS=40,this.game.stage.backgroundColor="#2d2d2d";var t=c.default.find(function(e){return"introduction"===e.id});this.actors=this.game.add.group();var n=t.actors.map(function(e){return{data:e,sprite:m.default.make(e.id,e.pos,this.game)}},this);n.forEach(function(t){e.actors.add(t.sprite)}),this.sceneManager=new d.default("scene-1"),this.sceneManager.start({actors:n}),this.interactionKey=this.game.input.keyboard.addKey(u.default.Keyboard.E),this.interactionKey.onDown.add(function(t){e.sceneManager.next({actors:n})},this)}},{key:"update",value:function(){this.sceneManager.update()}}]),e}());t.default=g},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(10),u=r(i),s=n(27),l=r(s),c=function(){function e(t){a(this,e),this.currentSceneIndex=0,this.currentAction=null,this.started=!1,this.sceneData=l.default.mount(u.default.find(function(e){return e.id===t}).sequence)}return o(e,[{key:"update",value:function(){this.current&&(this.current.update(),this.current.isDone&&!this.current.waitForInput&&(this.current.exit(),this.next()))}},{key:"next",value:function(e){if(!this.started)throw new Error("You must start the sequence before calling 'next'.");this.currentSceneIndex>=this.sceneData.length-1&&(this.started=!1,this.onFinished()),this.current&&!this.current.isDone||(this.current=this.sceneData[this.currentSceneIndex],this.current.enter(e),this.currentSceneIndex+=1)}},{key:"start",value:function(e){if(!(this.sceneData.length>0))throw new Error("You cannot start a scene without scene data.");this.started=!0,this.next(e)}},{key:"onFinished",value:function(){console.log("Sequence is complete.")}}]),e}();t.default=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(28),u=r(i),s=n(29),l=r(s),c=n(47),f=r(c),p=n(48),h=r(p),d=n(49),y=r(d),b={Talk:l.default,Parallel:f.default,Anim:h.default,Move:y.default},m=function(){function e(){a(this,e)}return o(e,null,[{key:"mount",value:function(e){var t=this;return e.map(function(e){return t.build(e)})}},{key:"build",value:function(e){var t=b[e.name],n=[];if(!t)throw new Error("Constructor was undefined: "+e.name);if(e.children&&e.children.length>0)for(var r=0;r<e.children.length;r++)n.push(this.build(e.children[r]));switch(e.child&&this.build(e.child),e.type){case u.default.TALK:case u.default.MOVE:case u.default.ANIM:return new t(e.data,e.waitForInput);case u.default.PARALLEL:return new t({children:n},e.waitForInput);default:throw new Error("Unrecognized node type:"+e.type)}}}]),e}();t.default=m},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={TALK:0,PARALLEL:1,ANIM:2,MOVE:3};t.default=r},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(50),s=function(e){return e&&e.__esModule?e:{default:e}}(u),l=function(e){function t(e,n){r(this,t);var o=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n));return o.name="Talk",o.str=e.str,o.targetId=e.targetId,o}return o(t,e),i(t,[{key:"enter",value:function(e){var t=this;if(console.log(this.name),console.log(this.str),e&&e.actors){e.actors.find(function(e){return e.data.id===t.targetId});this.isDone=!0}}},{key:"exit",value:function(e){"function"==typeof e&&e.call(this)}}]),t}(s.default);t.default=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(13),l=r(s),c=n(1),f=r(c),p=n(14),h=r(p),d=n(32),y=r(d),b=n(17),m=r(b),v=n(18),g=r(v),w=function(e){function t(e,n,r,i,u){a(this,t);var s=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,r,i,u));return s.body.collideWorldBounds=!0,s.config.behaviourId&&(s.behaviours=new y.default(s.config.behaviourId)),s}return i(t,e),u(t,[{key:"update",value:function(){if(this.activeWeapon&&this.activeWeapon.anchorTo(this.x,this.y+this.activeWeapon.height),!this.disabled||this.body.touching.down){if(this.disabled&&this.justGotHit&&this.body.touching.down)return void(this.justGotHit=!1);if(this.resetMovement(),this.busy||this.behaviours.update(this),this.currentTarget){var e=f.default.distance(this,this.currentTarget);this.behaviours.setVariable("inRangeOfTarget",e<this.config.alertRange),this.behaviours.setVariable("inRangeOfAttack",e<this.config.attackRange)}}}},{key:"move",value:function(e){f.default.distance(this,this.currentTarget)<this.width/3||this.disabled||f.default.targetWithinBounds(this.currentTarget,this,this.width/3)||(this.body.velocity.x+=e>0?this.config.movementSpeed:-this.config.movementSpeed,this.correctScale(e))}},{key:"moveTo",value:function(e){if(!this.disabled){var t=f.default.getTargetDirection(e.x,this.x);this.body.velocity.x+=t>0?this.config.movementSpeed:-this.config.movementSpeed,this.correctScale(t)}}},{key:"setTarget",value:function(e){this.currentTarget=e,this.behaviours.setVariable("currentTarget",e)}},{key:"chaseTarget",value:function(){this.move(f.default.getTargetDirection(this.currentTarget.x,this.x))}},{key:"attackTarget",value:function(){var e=this;if(!this.disabled&&!this.busy){this.faceTarget(this.currentTarget),this.busy=!0;var t=this.animator.getAnimation("attack"),n=f.default.getRandomInt(200,500),r=f.default.getRandomInt(200,500);this.game.time.events.add(n,function(){e.animator.play("attack"),e.activeWeapon.use(f.default.animDuration(t.speed,t.frameTotal),function(){e.game.time.events.add(r,function(){e.busy=!1},e)})},this)}}},{key:"takeDamage",value:function(e,t){this.disabled||(this.justGotHit=!0,console.log(this.name+" is taking damage: "+e),console.log(t,"was origin of damage."),this.activeWeapon.disable(),this.body.velocity.x=-500*f.default.getTargetDirection(this.currentTarget.x,this.x),this.body.velocity.y=-500,this.damageFlash())}},{key:"animate",value:function(){0!=this.body.velocity.x?this.animator.play("run"):this.animator.play("idle")}}]),t}((0,l.default)(h.default).with(g.default,m.default));t.default=w},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t){r(this,e),this.animator=t,this.currentAnim=null,this.playWhenDone=""}return a(e,[{key:"registerMany",value:function(e){for(var t=0;t<e.length;t++)this.register(e[t])}},{key:"register",value:function(e){if(!this.getAnimation(e.name)){var t=this.animator.add(e.name,e.frames,e.fps,e.loops);e.loops||t.onComplete.add(this.animDone,this)}}},{key:"getAnimation",value:function(e){return this.animator.getAnimation(e)}},{key:"play",value:function(e){if(this.currentAnim&&!this.currentAnim.loop)return void(this.playWhenDone=e);var t=this.animator.play(e);return this.currentAnim=t,t}},{key:"animDone",value:function(){this.playWhenDone.length>0&&(this.currentAnim=this.animator.play(this.playWhenDone))}}]),e}();t.default=o},function(e,t,n){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(15),u=r(i),s=n(33),l=r(s),c=function(){function t(n){return a(this,t),this.blackboard=new e.Blackboard,this.tree=new e.BehaviorTree,this.tree.root=l.default.build(u.default.find(function(e){return e.id===n}).root),this}return o(t,[{key:"setVariable",value:function(e,t){this.blackboard.set(e,t)}},{key:"update",value:function(e){this.tree.tick(e,this.blackboard)}}]),t}();t.default=c}).call(t,n(0))},function(e,t,n){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(16),u=r(i),s=n(15),l=(r(s),n(34)),c=r(l),f=n(35),p=r(f),h=n(36),d=r(h),y=n(37),b=r(y),m=n(38),v=r(m),g=n(39),w=r(g),_=n(40),O=r(_),j=n(41),k=r(j),P=n(42),T=r(P),E={Priority:e.Priority,Idle:c.default,Follow:p.default,Attack:d.default,Roam:b.default,RandomWait:v.default,SequenceSynced:w.default,InRange:O.default,InAttackRange:k.default,BoolCheck:T.default},S=function(){function e(){a(this,e)}return o(e,null,[{key:"build",value:function(e){var t=E[e.name],n=[],r={};if(!t)throw new Error("Constructor was undefined: "+e.name);if(e.children&&e.children.length>0)for(var a=0;a<e.children.length;a++)n.push(this.build(e.children[a]));switch(e.child&&(r=this.build(e.child)),e.type){case u.default.ACTION:return new t(e.param);case u.default.DECORATOR:return new t(e.param,{child:r});case u.default.COMPOSITE:return new t({children:n});default:throw new Error("Unrecognized node type:"+e.type)}}}]),e}();t.default=S}).call(t,n(0))},function(e,t,n){"use strict";(function(e){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(t){function i(){n(this,i);var e=r(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));return e.name="Idle",e}return a(i,t),o(i,[{key:"open",value:function(e){}},{key:"tick",value:function(t){return e.RUNNING}}]),i}(e.Action);t.default=i}).call(t,n(0))},function(e,t,n){"use strict";(function(e){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();n(0);var u=function(t){function n(){r(this,n);var e=a(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.name="Follow",e}return o(n,t),i(n,[{key:"open",value:function(e){}},{key:"tick",value:function(t){return t.target.chaseTarget(),e.RUNNING}}]),n}(e.Action);t.default=u}).call(t,n(0))},function(e,t,n){"use strict";(function(e){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();n(0);var u=function(t){function n(){r(this,n);var e=a(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.name="Attack",e}return o(n,t),i(n,[{key:"open",value:function(e){e.target.attackTarget()}},{key:"tick",value:function(t){return t.target.busy?e.RUNNING:e.SUCCESS}}]),n}(e.Action);t.default=u}).call(t,n(0))},function(e,t,n){"use strict";(function(e){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),s=function(e){return e&&e.__esModule?e:{default:e}}(u),l=function(t){function n(e){r(this,n);var t=a(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return t.name="Roam",t.currentLocation={x:0,y:0},t.destination={x:0,y:0},t.ignoreY=e,t}return o(n,t),i(n,[{key:"open",value:function(e){this.currentLocation.x=e.target.x,this.currentLocation.y=e.target.y,this.destination.x=s.default.getRandomInt(10,1240),this.destination.y=e.target.y,console.log("Roam started...")}},{key:"tick",value:function(t){return this.ignoreY&&(this.destination.y=t.target.y),t.target.moveTo(this.destination),s.default.distance({x:t.target.x,y:t.target.y},this.destination)<30?(t.target.resetMovement(),console.log("Destination reached."),e.SUCCESS):e.RUNNING}}]),n}(e.Action);t.default=l}).call(t,n(0))},function(e,t,n){"use strict";(function(e){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),s=function(e){return e&&e.__esModule?e:{default:e}}(u),l=function(t){function n(){r(this,n);var e=a(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.name="RandomWait",e.startTime=0,e.endTime=0,e}return o(n,t),i(n,[{key:"open",value:function(e){this.startTime=(new Date).getTime(),this.endTime=1e3*s.default.getRandomInt(1,3),console.log("Wait started.")}},{key:"tick",value:function(t){return(new Date).getTime()-this.startTime>this.endTime?(console.log("Wait complete."),e.SUCCESS):e.RUNNING}}]),n}(e.Action);t.default=l}).call(t,n(0))},function(e,t,n){"use strict";(function(e){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(t){function i(e){n(this,i);var t=r(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e));return t.name="SequenceSynced",t.i=0,t}return a(i,t),o(i,[{key:"tick",value:function(t){var n=this.children[this.i]._execute(t);if(n===e.SUCCESS){if(this.i>=this.children.length-1)return this.i=0,n;this.i+=1}return e.RUNNING}}]),i}(e.Composite);t.default=i}).call(t,n(0))},function(e,t,n){"use strict";(function(e){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();n(0);var u=function(t){function n(){r(this,n);var e=a(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.name="InRange",e}return o(n,t),i(n,[{key:"tick",value:function(t){return t.blackboard.get("inRangeOfTarget")?e.SUCCESS:e.FAILURE}}]),n}(e.Condition);t.default=u}).call(t,n(0))},function(e,t,n){"use strict";(function(e){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();n(0);var u=function(t){function n(){r(this,n);var e=a(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.name="InAttackRange",e}return o(n,t),i(n,[{key:"tick",value:function(t){return t.blackboard.get("inRangeOfAttack")?e.SUCCESS:e.FAILURE}}]),n}(e.Condition);t.default=u}).call(t,n(0))},function(e,t,n){"use strict";(function(e){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();n(0);var u=function(t){function n(e,t){r(this,n);var o=a(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t));return o.name="BoolCheck",o.propertyName=e,o}return o(n,t),i(n,[{key:"tick",value:function(t){return this.child?t.blackboard.get(this.propertyName)?(this.child._execute(t),e.SUCCESS):e.FAILURE:e.ERROR}}]),n}(e.Decorator);t.default=u}).call(t,n(0))},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(e){function t(e,n,o,i){r(this,t);var u=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,o,i));return e.add.existing(u),e.physics.arcade.enable(u),u.name=i,u.body.allowGravity=!1,u.body.enable=!1,u.alpha=.3,u.stats={damageOutput:1},u.anchor.x=.5,u}return o(t,e),i(t,[{key:"use",value:function(e,t){var n=this;this.body.enabled||(this.body.enable=!0,this.game.time.events.add(e,function(){n.body.enable=!1,"function"==typeof t&&t.call(n)},this))}},{key:"disable",value:function(){this.body.enable=!1}},{key:"damageOutput",value:function(){return this.stats.damageOutput}},{key:"setBody",value:function(e){this.body.setSize(e.x,e.y,e.w,e.h)}},{key:"anchorTo",value:function(e,t){this.x=e,this.y=t}}]),t}(Phaser.Sprite);t.default=u},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(e){return function(e){function t(){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),i(t,[{key:"initManualInput",value:function(){this.game.input.keyboard.addKeyCapture([Phaser.Keyboard.LEFT,Phaser.Keyboard.RIGHT,Phaser.Keyboard.UP,Phaser.Keyboard.DOWN]),this.attackKey=this.game.input.keyboard.addKey(Phaser.Keyboard.CONTROL),this.attackKey.onDown.add(this.attack,this)}},{key:"leftInputIsActive",value:function(){var e=!1;return e=this.game.input.keyboard.isDown(Phaser.Keyboard.LEFT),e|=this.game.input.activePointer.isDown&&this.game.input.activePointer.x<this.game.width/4}},{key:"rightInputIsActive",value:function(){var e=!1;return e=this.game.input.keyboard.isDown(Phaser.Keyboard.RIGHT),e|=this.game.input.activePointer.isDown&&this.game.input.activePointer.x>this.game.width/2+this.game.width/4}},{key:"upInputIsActive",value:function(e){var t=!1;return t=this.game.input.keyboard.downDuration(Phaser.Keyboard.UP,e),t|=this.game.input.activePointer.justPressed(e+1e3/60)&&this.game.input.activePointer.x>this.game.width/4&&this.game.input.activePointer.x<this.game.width/2+this.game.width/4}},{key:"upInputReleased",value:function(){var e=!1;return e=this.game.input.keyboard.upDuration(Phaser.Keyboard.UP),e|=this.game.input.activePointer.justReleased()}}]),t}(e)};t.default=u},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();n(2),n(3);var i=n(4),u=r(i),s=n(6),l=(r(s),n(9)),c=r(l),f=n(7),p=r(f),h=n(11),d=r(h),y=n(12),b=(r(y),n(19)),m=r(b),v=function(){function e(){a(this,e)}return o(e,[{key:"render",value:function(){}},{key:"preload",value:function(){this.game.scale.scaleMode=u.default.ScaleManager.USER_SCALE,this.game.scale.setUserScale(6,6),this.game.renderer.renderSession.roundPixels=!0,u.default.Canvas.setImageRenderingCrisp(this.game.canvas),this.game.load.image("bg","resources/Game/background.png",256,124),this.game.load.spritesheet("waters","resources/Game/waterfall.png",16,16),this.game.load.spritesheet("watersrp","resources/Game/waterfall-rp.png",16,16),this.game.load.image("player","resources/Game/player-lr.png",16,16),this.game.load.image("enemy","resources/Game/enemy-lr.png",16,16),this.game.load.tilemap("level-tilemap","resources/Game/maps/world-sheet.json",null,u.default.Tilemap.TILED_JSON),this.game.load.image("world-atlas","resources/Tiles/world-sheet.png"),this.game.load.image("col-atlas","resources/Tiles/arcade-slopes-16.png")}},{key:"create",value:function(){this.tileSprite=this.game.add.sprite(0,0,"bg"),this.tileSprite.fixedToCamera=!0,this.waterfalltop=this.game.add.tileSprite(160,192,64,16,"waters"),this.waterfalltop.animations.add("wt1"),this.waterfalltop.animations.play("wt1",8,!0),this.waterfall=this.game.add.tileSprite(160,208,64,144,"watersrp"),this.waterfall.animations.add("wt1"),this.waterfall.animations.play("wt1",8,!0),this.game.plugins.add(u.default.Plugin.ArcadeSlopes),this.game.physics.startSystem(u.default.Physics.ARCADE),this.game.physics.arcade.gravity.y=1200,this.game.physics.arcade.TILE_BIAS=40,this.game.stage.backgroundColor="#2d2d2d";var e=c.default.find(function(e){return"testlevel"===e.id}),t=new d.default(this.game);t.initializeWorld(e.world),this.collisionLayer=t.getLayerByProperty("collisionLayer"),this.hero=new m.default(this.game,0,0,p.default.player.sprite,{config:p.default.player.config,stats:p.default.player.stats,equipment:p.default.player.equipment}),t.enableSlopesFor(this.hero),p.default.player.animations&&this.hero.animator&&this.hero.animator.registerMany(p.default.player.animations),this.enemies=this.game.add.group(),this.enemyWeapons=this.game.add.group(),t.postProcess(),this.game.camera.follow(this.hero,u.default.Camera.FOLLOW_TOPDOWN)}},{key:"update",value:function(){this.game.physics.arcade.collide(this.hero,this.collisionLayer.phaserLayer),this.game.physics.arcade.collide(this.enemies,this.collisionLayer.phaserLayer),this.game.physics.arcade.overlap(this.hero.activeWeapon,this.enemies,function(e,t){t.takeDamage(e.damageOutput(),{x:e.x,y:e.y})},null,this),this.game.physics.arcade.overlap(this.hero,this.enemyWeapons,function(e,t){e.takeDamage(t.damageOutput(),{x:t.x,y:t.y})},null,this)}}]),e}();t.default=v},,function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(50),s=function(e){return e&&e.__esModule?e:{default:e}}(u),l=function(e){function t(e,n){r(this,t);var o=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n));return o.name="Parallel",o.children=e.children,o.len=o.children.length,o.isDone=!1,o}return o(t,e),i(t,[{key:"enter",value:function(e){for(var t=0;t<this.len;t++)this.children[t].enter(e)}},{key:"update",value:function(){this.isDone=this.children.every(function(e){return e.update(),e.isDone})}},{key:"exit",value:function(){for(var e=0;e<this.len;e++)this.children[e].exit()}}]),t}(s.default);t.default=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(50),s=function(e){return e&&e.__esModule?e:{default:e}}(u),l=function(e){function t(e,n){r(this,t);var o=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n));return o.name="Anim",o.animation=null,o}return o(t,e),i(t,[{key:"enter",value:function(){this.isDone=!0}}]),t}(s.default);t.default=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(50),s=function(e){return e&&e.__esModule?e:{default:e}}(u),l=function(e){function t(e,n){r(this,t);var o=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n));return o.name="Move",o.waitForInput=e.waitForInput,o.targetId=e.targetId,o.currentTarget=null,o.config={x:e.x,y:e.y,speed:e.speed},o}return o(t,e),i(t,[{key:"enter",value:function(e){var t=this;e&&e.actors&&(this.currentTarget=e.actors.find(function(e){return e.data.id===t.targetId}).sprite)}},{key:"update",value:function(){this.isDone=!0}}]),t}(s.default);t.default=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t){r(this,e),this.name="Root",this.isDone=!1,this.waitForInput=void 0===t||t}return a(e,[{key:"enter",value:function(){}},{key:"update",value:function(){}},{key:"exit",value:function(){}}]),e}();t.default=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(52),u=r(i),s=n(7),l=r(s),c=function(){function e(){a(this,e)}return o(e,null,[{key:"make",value:function(e,t,n){var r=l.default.actors.find(function(t){return t.id===e});if(!r)throw new Error("Cannot find an actor with the id '"+e+"'.");var a=new u.default(n,t.x,t.y,r.sprite,{config:r.config,stats:r.stats});return r.animations&&a.animator&&a.animator.registerMany(r.animations),a}}]),e}();t.default=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(13),l=r(s),c=n(1),f=r(c),p=n(14),h=r(p),d=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"update",value:function(){this.resetMovement()}},{key:"moveTo",value:function(e){this.body.velocity.x+=e>0?this.config.movementSpeed:-this.config.movementSpeed,this.correctScale(e)}},{key:"moveTo",value:function(e,t){if(f.default.distance(this,e)<this.width/3)return!0;var n=f.default.getTargetDirection(e.x,this.x);this.body.velocity.x+=n>0?t:-t,this.correctScale(n)}},{key:"animate",value:function(){0!=this.body.velocity.x?this.animator.play("run"):this.animator.play("idle")}}]),t}((0,l.default)(h.default).with());t.default=d}],[20]);